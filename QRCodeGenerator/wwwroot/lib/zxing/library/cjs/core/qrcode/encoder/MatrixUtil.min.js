/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/qrcode/encoder/MatrixUtil.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var BitArray_1=require("../../common/BitArray"),Integer_1=require("../../util/Integer"),QRCode_1=require("./QRCode"),MaskUtil_1=require("./MaskUtil"),WriterException_1=require("../../WriterException"),IllegalArgumentException_1=require("../../IllegalArgumentException"),MatrixUtil=function(){function r(){}return r.clearMatrix=function(r){r.clear(255)},r.buildMatrix=function(t,e,n,a,o){r.clearMatrix(o),r.embedBasicPatterns(n,o),r.embedTypeInfo(e,a,o),r.maybeEmbedVersionInfo(n,o),r.embedDataBits(t,a,o)},r.embedBasicPatterns=function(t,e){r.embedPositionDetectionPatternsAndSeparators(e),r.embedDarkDotAtLeftBottomCorner(e),r.maybeEmbedPositionAdjustmentPatterns(t,e),r.embedTimingPatterns(e)},r.embedTypeInfo=function(t,e,n){var a=new BitArray_1.default;r.makeTypeInfoBits(t,e,a);for(var o=0,i=a.getSize();o<i;++o){var f=a.get(a.getSize()-1-o),m=r.TYPE_INFO_COORDINATES[o],I=m[0],A=m[1];if(n.setBoolean(I,A,f),o<8){var y=n.getWidth()-o-1,s=8;n.setBoolean(y,s,f)}else{y=8,s=n.getHeight()-7+(o-8);n.setBoolean(y,s,f)}}},r.maybeEmbedVersionInfo=function(t,e){if(!(t.getVersionNumber()<7)){var n=new BitArray_1.default;r.makeVersionInfoBits(t,n);for(var a=17,o=0;o<6;++o)for(var i=0;i<3;++i){var f=n.get(a);a--,e.setBoolean(o,e.getHeight()-11+i,f),e.setBoolean(e.getHeight()-11+i,o,f)}}},r.embedDataBits=function(t,e,n){for(var a=0,o=-1,i=n.getWidth()-1,f=n.getHeight()-1;i>0;){for(6===i&&(i-=1);f>=0&&f<n.getHeight();){for(var m=0;m<2;++m){var I=i-m;if(r.isEmpty(n.get(I,f))){var A=void 0;a<t.getSize()?(A=t.get(a),++a):A=!1,255!==e&&MaskUtil_1.default.getDataMaskBit(e,I,f)&&(A=!A),n.setBoolean(I,f,A)}}f+=o}f+=o=-o,i-=2}if(a!==t.getSize())throw new WriterException_1.default("Not all bits consumed: "+a+"/"+t.getSize())},r.findMSBSet=function(r){return 32-Integer_1.default.numberOfLeadingZeros(r)},r.calculateBCHCode=function(t,e){if(0===e)throw new IllegalArgumentException_1.default("0 polynomial");var n=r.findMSBSet(e);for(t<<=n-1;r.findMSBSet(t)>=n;)t^=e<<r.findMSBSet(t)-n;return t},r.makeTypeInfoBits=function(t,e,n){if(!QRCode_1.default.isValidMaskPattern(e))throw new WriterException_1.default("Invalid mask pattern");var a=t.getBits()<<3|e;n.appendBits(a,5);var o=r.calculateBCHCode(a,r.TYPE_INFO_POLY);n.appendBits(o,10);var i=new BitArray_1.default;if(i.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(i),15!==n.getSize())throw new WriterException_1.default("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(t,e){e.appendBits(t.getVersionNumber(),6);var n=r.calculateBCHCode(t.getVersionNumber(),r.VERSION_INFO_POLY);if(e.appendBits(n,12),18!==e.getSize())throw new WriterException_1.default("should not happen but we got: "+e.getSize())},r.isEmpty=function(r){return 255===r},r.embedTimingPatterns=function(t){for(var e=8;e<t.getWidth()-8;++e){var n=(e+1)%2;r.isEmpty(t.get(e,6))&&t.setNumber(e,6,n),r.isEmpty(t.get(6,e))&&t.setNumber(6,e,n)}},r.embedDarkDotAtLeftBottomCorner=function(r){if(0===r.get(8,r.getHeight()-8))throw new WriterException_1.default;r.setNumber(8,r.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(t,e,n){for(var a=0;a<8;++a){if(!r.isEmpty(n.get(t+a,e)))throw new WriterException_1.default;n.setNumber(t+a,e,0)}},r.embedVerticalSeparationPattern=function(t,e,n){for(var a=0;a<7;++a){if(!r.isEmpty(n.get(t,e+a)))throw new WriterException_1.default;n.setNumber(t,e+a,0)}},r.embedPositionAdjustmentPattern=function(t,e,n){for(var a=0;a<5;++a)for(var o=r.POSITION_ADJUSTMENT_PATTERN[a],i=0;i<5;++i)n.setNumber(t+i,e+a,o[i])},r.embedPositionDetectionPattern=function(t,e,n){for(var a=0;a<7;++a)for(var o=r.POSITION_DETECTION_PATTERN[a],i=0;i<7;++i)n.setNumber(t+i,e+a,o[i])},r.embedPositionDetectionPatternsAndSeparators=function(t){var e=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,t),r.embedPositionDetectionPattern(t.getWidth()-e,0,t),r.embedPositionDetectionPattern(0,t.getWidth()-e,t);r.embedHorizontalSeparationPattern(0,7,t),r.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),r.embedHorizontalSeparationPattern(0,t.getWidth()-8,t);r.embedVerticalSeparationPattern(7,0,t),r.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),r.embedVerticalSeparationPattern(7,t.getHeight()-7,t)},r.maybeEmbedPositionAdjustmentPatterns=function(t,e){if(!(t.getVersionNumber()<2))for(var n=t.getVersionNumber()-1,a=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],o=0,i=a.length;o!==i;o++){var f=a[o];if(f>=0)for(var m=0;m!==i;m++){var I=a[m];I>=0&&r.isEmpty(e.get(I,f))&&r.embedPositionAdjustmentPattern(I-2,f-2,e)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r}();exports.default=MatrixUtil;
//# sourceMappingURL=/sm/88d713846234dd80779c87fd22d1ae5cf18ddad9c2cc20f5aec09380e2ab127f.map