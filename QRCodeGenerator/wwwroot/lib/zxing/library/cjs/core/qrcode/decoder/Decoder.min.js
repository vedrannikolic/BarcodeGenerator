/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/qrcode/decoder/Decoder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __values=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var ChecksumException_1=require("../../ChecksumException"),BitMatrix_1=require("../../common/BitMatrix"),GenericGF_1=require("../../common/reedsolomon/GenericGF"),ReedSolomonDecoder_1=require("../../common/reedsolomon/ReedSolomonDecoder"),BitMatrixParser_1=require("./BitMatrixParser"),DataBlock_1=require("./DataBlock"),DecodedBitStreamParser_1=require("./DecodedBitStreamParser"),QRCodeDecoderMetaData_1=require("./QRCodeDecoderMetaData"),Decoder=function(){function e(){this.rsDecoder=new ReedSolomonDecoder_1.default(GenericGF_1.default.QR_CODE_FIELD_256)}return e.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(BitMatrix_1.default.parseFromBooleanArray(e),r)},e.prototype.decodeBitMatrix=function(e,r){var t=new BitMatrixParser_1.default(e),o=null;try{return this.decodeBitMatrixParser(t,r)}catch(e){o=e}try{t.remask(),t.setMirror(!0),t.readVersion(),t.readFormatInformation(),t.mirror();var a=this.decodeBitMatrixParser(t,r);return a.setOther(new QRCodeDecoderMetaData_1.default(!0)),a}catch(e){if(null!==o)throw o;throw e}},e.prototype.decodeBitMatrixParser=function(e,r){var t,o,a,n,i=e.readVersion(),d=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),l=DataBlock_1.default.getDataBlocks(c,i,d),u=0;try{for(var s=__values(l),f=s.next();!f.done;f=s.next()){u+=(D=f.value).getNumDataCodewords()}}catch(e){t={error:e}}finally{try{f&&!f.done&&(o=s.return)&&o.call(s)}finally{if(t)throw t.error}}var m=new Uint8Array(u),_=0;try{for(var h=__values(l),y=h.next();!y.done;y=h.next()){var D,v=(D=y.value).getCodewords(),x=D.getNumDataCodewords();this.correctErrors(v,x);for(var B=0;B<x;B++)m[_++]=v[B]}}catch(e){a={error:e}}finally{try{y&&!y.done&&(n=h.return)&&n.call(h)}finally{if(a)throw a.error}}return DecodedBitStreamParser_1.default.decode(m,i,d,r)},e.prototype.correctErrors=function(e,r){var t=new Int32Array(e);try{this.rsDecoder.decode(t,e.length-r)}catch(e){throw new ChecksumException_1.default}for(var o=0;o<r;o++)e[o]=t[o]},e}();exports.default=Decoder;
//# sourceMappingURL=/sm/33e8d5b2da51ec363ab6210fff898e795ba91ff6d2b420aaa21379f0b1a59918.map