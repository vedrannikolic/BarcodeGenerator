/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/oned/Code93Reader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var BarcodeFormat_1=require("../BarcodeFormat"),ChecksumException_1=require("../ChecksumException"),FormatException_1=require("../FormatException"),NotFoundException_1=require("../NotFoundException"),OneDReader_1=require("./OneDReader"),Result_1=require("../Result"),ResultPoint_1=require("../ResultPoint"),Code93Reader=function(e){function t(){var t=e.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return __extends(t,e),t.prototype.decodeRow=function(e,r,o){var n,i,a,c,u,d,s=this.findAsteriskPattern(r),l=r.getNextSet(s[1]),f=r.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";do{t.recordPattern(r,l,h);var _=this.toPattern(h);if(_<0)throw new NotFoundException_1.default;u=this.patternToChar(_),this.decodeRowResult+=u,d=l;try{for(var R=(n=void 0,__values(h)),C=R.next();!C.done;C=R.next()){l+=C.value}}catch(e){n={error:e}}finally{try{C&&!C.done&&(i=R.return)&&i.call(R)}finally{if(n)throw n.error}}l=r.getNextSet(l)}while("*"!==u);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var p=0;try{for(var w=__values(h),A=w.next();!A.done;A=w.next()){p+=A.value}}catch(e){a={error:e}}finally{try{A&&!A.done&&(c=w.return)&&c.call(w)}finally{if(a)throw a.error}}if(l===f||!r.get(l))throw new NotFoundException_1.default;if(this.decodeRowResult.length<2)throw new NotFoundException_1.default;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var E=this.decodeExtended(this.decodeRowResult),v=(s[1]+s[0])/2,x=d+p/2;return new Result_1.default(E,null,0,[new ResultPoint_1.default(v,e),new ResultPoint_1.default(x,e)],BarcodeFormat_1.default.CODE_93,(new Date).getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),o=e.getNextSet(0);this.counters.fill(0);for(var n=this.counters,i=o,a=!1,c=n.length,u=0,d=o;d<r;d++)if(e.get(d)!==a)n[u]++;else{if(u===c-1){if(this.toPattern(n)===t.ASTERISK_ENCODING)return new Int32Array([i,d]);i+=n[0]+n[1],n.copyWithin(0,2,2+u-1),n[u-1]=0,n[u]=0,u--}else u++;n[u]=1,a=!a}throw new NotFoundException_1.default},t.prototype.toPattern=function(e){var t,r,o=0;try{for(var n=__values(e),i=n.next();!i.done;i=n.next()){o+=i.value}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}for(var a=0,c=e.length,u=0;u<c;u++){var d=Math.round(9*e[u]/o);if(d<1||d>4)return-1;if(0==(1&u))for(var s=0;s<d;s++)a=a<<1|1;else a<<=d}return a},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new NotFoundException_1.default},t.prototype.decodeExtended=function(e){for(var t=e.length,r="",o=0;o<t;o++){var n=e.charAt(o);if(n>="a"&&n<="d"){if(o>=t-1)throw new FormatException_1.default;var i=e.charAt(o+1),a="\0";switch(n){case"d":if(!(i>="A"&&i<="Z"))throw new FormatException_1.default;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"a":if(!(i>="A"&&i<="Z"))throw new FormatException_1.default;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"b":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if(!(i>="X"&&i<="Z"))throw new FormatException_1.default;a=String.fromCharCode(127)}break;case"c":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new FormatException_1.default;a=":"}}r+=a,o++}else r+=n}return r},t.prototype.checkChecksums=function(e){var t=e.length;this.checkOneChecksum(e,t-2,20),this.checkOneChecksum(e,t-1,15)},t.prototype.checkOneChecksum=function(e,r,o){for(var n=1,i=0,a=r-1;a>=0;a--)i+=n*t.ALPHABET_STRING.indexOf(e.charAt(a)),++n>o&&(n=1);if(e.charAt(r)!==t.ALPHABET_STRING[i%47])throw new ChecksumException_1.default},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(OneDReader_1.default);exports.default=Code93Reader;
//# sourceMappingURL=/sm/e2ef726488590a396ab4eb5771be55e53aed6cfb964d8f896e730c4063cef5c1.map