/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/oned/UPCEANReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var BarcodeFormat_1=require("../BarcodeFormat"),DecodeHintType_1=require("../DecodeHintType"),Result_1=require("../Result"),ResultMetadataType_1=require("../ResultMetadataType"),ResultPoint_1=require("../ResultPoint"),UPCEANExtensionSupport_1=require("./UPCEANExtensionSupport"),AbstractUPCEANReader_1=require("./AbstractUPCEANReader"),NotFoundException_1=require("../NotFoundException"),FormatException_1=require("../FormatException"),ChecksumException_1=require("../ChecksumException"),UPCEANReader=function(e){function t(){var r=e.call(this)||this;r.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map((function(e){return Int32Array.from(e)}));for(var n=10;n<20;n++){for(var o=t.L_PATTERNS[n-10],a=new Int32Array(o.length),u=0;u<o.length;u++)a[u]=o[o.length-u-1];t.L_AND_G_PATTERNS[n]=a}return r}return __extends(t,e),t.prototype.decodeRow=function(e,r,n){var o=t.findStartGuardPattern(r),a=null==n?null:n.get(DecodeHintType_1.default.NEED_RESULT_POINT_CALLBACK);if(null!=a){var u=new ResultPoint_1.default((o[0]+o[1])/2,e);a.foundPossibleResultPoint(u)}var i=this.decodeMiddle(r,o,this.decodeRowStringBuffer),d=i.rowOffset,c=i.resultString;if(null!=a){var l=new ResultPoint_1.default(d,e);a.foundPossibleResultPoint(l)}var f=t.decodeEnd(r,d);if(null!=a){var s=new ResultPoint_1.default((f[0]+f[1])/2,e);a.foundPossibleResultPoint(s)}var _=f[1],E=_+(_-f[0]);if(E>=r.getSize()||!r.isRange(_,E,!1))throw new NotFoundException_1.default;var h=c.toString();if(h.length<8)throw new FormatException_1.default;if(!t.checkChecksum(h))throw new ChecksumException_1.default;var p=(o[1]+o[0])/2,A=(f[1]+f[0])/2,P=this.getBarcodeFormat(),R=[new ResultPoint_1.default(p,e),new ResultPoint_1.default(A,e)],N=new Result_1.default(h,null,0,R,P,(new Date).getTime()),T=0;try{var C=UPCEANExtensionSupport_1.default.decodeRow(e,r,f[1]);N.putMetadata(ResultMetadataType_1.default.UPC_EAN_EXTENSION,C.getText()),N.putAllMetadata(C.getResultMetadata()),N.addResultPoints(C.getResultPoints()),T=C.getText().length}catch(e){}var w=null==n?null:n.get(DecodeHintType_1.default.ALLOWED_EAN_EXTENSIONS);if(null!=w){var g=!1;for(var v in w)if(T.toString()===v){g=!0;break}if(!g)throw new NotFoundException_1.default}return P===BarcodeFormat_1.default.EAN_13||BarcodeFormat_1.default.UPC_A,N},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(0===r)return!1;var n=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===n},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,r=0,n=t-1;n>=0;n-=2){if((o=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new FormatException_1.default;r+=o}r*=3;for(n=t-2;n>=0;n-=2){var o;if((o=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new FormatException_1.default;r+=o}return(1e3-r)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(AbstractUPCEANReader_1.default);exports.default=UPCEANReader;
//# sourceMappingURL=/sm/361539c8e4fc6c04fd1274491251729c63de9f29c86057de9e1c88fa9dd2a299.map