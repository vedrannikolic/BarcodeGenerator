/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/oned/Code128Reader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])},r(t,e)};return function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}}();Object.defineProperty(exports,"__esModule",{value:!0});var BarcodeFormat_1=require("../BarcodeFormat"),ChecksumException_1=require("../ChecksumException"),DecodeHintType_1=require("../DecodeHintType"),FormatException_1=require("../FormatException"),NotFoundException_1=require("../NotFoundException"),Result_1=require("../Result"),ResultPoint_1=require("../ResultPoint"),OneDReader_1=require("./OneDReader"),Code128Reader=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.findStartPattern=function(r){for(var e=r.getSize(),a=r.getNextSet(0),n=0,o=Int32Array.from([0,0,0,0,0,0]),_=a,A=!1,f=a;f<e;f++)if(r.get(f)!==A)o[n]++;else{if(5===n){for(var C=t.MAX_AVG_VARIANCE,m=-1,I=t.CODE_START_A;I<=t.CODE_START_C;I++){var y=OneDReader_1.default.patternMatchVariance(o,t.CODE_PATTERNS[I],t.MAX_INDIVIDUAL_VARIANCE);y<C&&(C=y,m=I)}if(m>=0&&r.isRange(Math.max(0,_-(f-_)/2),_,!1))return Int32Array.from([_,f,m]);_+=o[0]+o[1],(o=o.slice(2,o.length))[n-1]=0,o[n]=0,n--}else n++;o[n]=1,A=!A}throw new NotFoundException_1.default},t.decodeCode=function(r,e,a){OneDReader_1.default.recordPattern(r,a,e);for(var n=t.MAX_AVG_VARIANCE,o=-1,_=0;_<t.CODE_PATTERNS.length;_++){var A=t.CODE_PATTERNS[_],f=this.patternMatchVariance(e,A,t.MAX_INDIVIDUAL_VARIANCE);f<n&&(n=f,o=_)}if(o>=0)return o;throw new NotFoundException_1.default},t.prototype.decodeRow=function(r,e,a){var n,o=a&&!0===a.get(DecodeHintType_1.default.ASSUME_GS1),_=t.findStartPattern(e),A=_[2],f=0,C=new Uint8Array(20);switch(C[f++]=A,A){case t.CODE_START_A:n=t.CODE_CODE_A;break;case t.CODE_START_B:n=t.CODE_CODE_B;break;case t.CODE_START_C:n=t.CODE_CODE_C;break;default:throw new FormatException_1.default}for(var m=!1,I=!1,y="",E=_[0],O=_[1],D=Int32Array.from([0,0,0,0,0,0]),c=0,i=0,s=A,u=0,d=!0,h=!1,T=!1;!m;){var l=I;switch(I=!1,c=i,i=t.decodeCode(e,D,O),C[f++]=i,i!==t.CODE_STOP&&(d=!0),i!==t.CODE_STOP&&(s+=++u*i),E=O,O+=D.reduce((function(r,t){return r+t}),0),i){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new FormatException_1.default}switch(n){case t.CODE_CODE_A:if(i<64)y+=T===h?String.fromCharCode(" ".charCodeAt(0)+i):String.fromCharCode(" ".charCodeAt(0)+i+128),T=!1;else if(i<96)y+=T===h?String.fromCharCode(i-64):String.fromCharCode(i+64),T=!1;else switch(i!==t.CODE_STOP&&(d=!1),i){case t.CODE_FNC_1:o&&(0===y.length?y+="]C1":y+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!h&&T?(h=!0,T=!1):h&&T?(h=!1,T=!1):T=!0;break;case t.CODE_SHIFT:I=!0,n=t.CODE_CODE_B;break;case t.CODE_CODE_B:n=t.CODE_CODE_B;break;case t.CODE_CODE_C:n=t.CODE_CODE_C;break;case t.CODE_STOP:m=!0}break;case t.CODE_CODE_B:if(i<96)y+=T===h?String.fromCharCode(" ".charCodeAt(0)+i):String.fromCharCode(" ".charCodeAt(0)+i+128),T=!1;else switch(i!==t.CODE_STOP&&(d=!1),i){case t.CODE_FNC_1:o&&(0===y.length?y+="]C1":y+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!h&&T?(h=!0,T=!1):h&&T?(h=!1,T=!1):T=!0;break;case t.CODE_SHIFT:I=!0,n=t.CODE_CODE_A;break;case t.CODE_CODE_A:n=t.CODE_CODE_A;break;case t.CODE_CODE_C:n=t.CODE_CODE_C;break;case t.CODE_STOP:m=!0}break;case t.CODE_CODE_C:if(i<100)i<10&&(y+="0"),y+=i;else switch(i!==t.CODE_STOP&&(d=!1),i){case t.CODE_FNC_1:o&&(0===y.length?y+="]C1":y+=String.fromCharCode(29));break;case t.CODE_CODE_A:n=t.CODE_CODE_A;break;case t.CODE_CODE_B:n=t.CODE_CODE_B;break;case t.CODE_STOP:m=!0}}l&&(n=n===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var S=O-E;if(O=e.getNextUnset(O),!e.isRange(O,Math.min(e.getSize(),O+(O-E)/2),!1))throw new NotFoundException_1.default;if((s-=u*c)%103!==c)throw new ChecksumException_1.default;var R=y.length;if(0===R)throw new NotFoundException_1.default;R>0&&d&&(y=n===t.CODE_CODE_C?y.substring(0,R-2):y.substring(0,R-1));for(var p=(_[1]+_[0])/2,N=E+S/2,F=C.length,w=new Uint8Array(F),g=0;g<F;g++)w[g]=C[g];var b=[new ResultPoint_1.default(p,r),new ResultPoint_1.default(N,r)];return new Result_1.default(y,w,0,b,BarcodeFormat_1.default.CODE_128,(new Date).getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(OneDReader_1.default);exports.default=Code128Reader;
//# sourceMappingURL=/sm/7db14f7e6bc11a6bfe1e745fbc7ff17bd868f2c5a2cefdee16a78b92c3280700.map