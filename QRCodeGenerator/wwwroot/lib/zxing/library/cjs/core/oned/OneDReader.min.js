/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/oned/OneDReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var BitArray_1=require("../common/BitArray"),DecodeHintType_1=require("../DecodeHintType"),ResultMetadataType_1=require("../ResultMetadataType"),ResultPoint_1=require("../ResultPoint"),NotFoundException_1=require("../NotFoundException"),OneDReader=function(){function e(){}return e.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch(f){if(t&&!0===t.get(DecodeHintType_1.default.TRY_HARDER)&&e.isRotateSupported()){var r=e.rotateCounterClockwise(),a=this.doDecode(r,t),o=a.getResultMetadata(),n=270;null!==o&&!0===o.get(ResultMetadataType_1.default.ORIENTATION)&&(n+=o.get(ResultMetadataType_1.default.ORIENTATION)%360),a.putMetadata(ResultMetadataType_1.default.ORIENTATION,n);var u=a.getResultPoints();if(null!==u)for(var i=r.getHeight(),d=0;d<u.length;d++)u[d]=new ResultPoint_1.default(i-u[d].getY()-1,u[d].getX());return a}throw new NotFoundException_1.default}},e.prototype.reset=function(){},e.prototype.doDecode=function(e,t){var r,a=e.getWidth(),o=e.getHeight(),n=new BitArray_1.default(a),u=t&&!0===t.get(DecodeHintType_1.default.TRY_HARDER),i=Math.max(1,o>>(u?8:5));r=u?o:15;for(var d=Math.trunc(o/2),f=0;f<r;f++){var l=Math.trunc((f+1)/2),c=d+i*(0==(1&f)?l:-l);if(c<0||c>=o)break;try{n=e.getBlackRow(c,n)}catch(e){continue}for(var p=function(e){if(1===e&&(n.reverse(),t&&!0===t.get(DecodeHintType_1.default.NEED_RESULT_POINT_CALLBACK))){var r=new Map;t.forEach((function(e,t){return r.set(t,e)})),r.delete(DecodeHintType_1.default.NEED_RESULT_POINT_CALLBACK),t=r}try{var o=_.decodeRow(c,n,t);if(1===e){o.putMetadata(ResultMetadataType_1.default.ORIENTATION,180);var u=o.getResultPoints();null!==u&&(u[0]=new ResultPoint_1.default(a-u[0].getX()-1,u[0].getY()),u[1]=new ResultPoint_1.default(a-u[1].getX()-1,u[1].getY()))}return{value:o}}catch(e){}},_=this,R=0;R<2;R++){var s=p(R);if("object"==typeof s)return s.value}}throw new NotFoundException_1.default},e.recordPattern=function(e,t,r){for(var a=r.length,o=0;o<a;o++)r[o]=0;var n=e.getSize();if(t>=n)throw new NotFoundException_1.default;for(var u=!e.get(t),i=0,d=t;d<n;){if(e.get(d)!==u)r[i]++;else{if(++i===a)break;r[i]=1,u=!u}d++}if(i!==a&&(i!==a-1||d!==n))throw new NotFoundException_1.default},e.recordPatternInReverse=function(t,r,a){for(var o=a.length,n=t.get(r);r>0&&o>=0;)t.get(--r)!==n&&(o--,n=!n);if(o>=0)throw new NotFoundException_1.default;e.recordPattern(t,r+1,a)},e.patternMatchVariance=function(e,t,r){for(var a=e.length,o=0,n=0,u=0;u<a;u++)o+=e[u],n+=t[u];if(o<n)return Number.POSITIVE_INFINITY;var i=o/n;r*=i;for(var d=0,f=0;f<a;f++){var l=e[f],c=t[f]*i,p=l>c?l-c:c-l;if(p>r)return Number.POSITIVE_INFINITY;d+=p}return d/o},e}();exports.default=OneDReader;
//# sourceMappingURL=/sm/b6fe4c862623e0bd9cf0d98988446812edf0ac7d3143f9dd302dab49122a1da4.map