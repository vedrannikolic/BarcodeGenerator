/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/oned/Code39Reader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var BarcodeFormat_1=require("../BarcodeFormat"),ChecksumException_1=require("../ChecksumException"),FormatException_1=require("../FormatException"),NotFoundException_1=require("../NotFoundException"),OneDReader_1=require("./OneDReader"),Result_1=require("../Result"),ResultPoint_1=require("../ResultPoint"),Code39Reader=function(e){function t(t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var o=e.call(this)||this;return o.usingCheckDigit=t,o.extendedMode=r,o.decodeRowResult="",o.counters=new Int32Array(9),o}return __extends(t,e),t.prototype.decodeRow=function(e,r,o){var n,i,a,d,u=this.counters;u.fill(0),this.decodeRowResult="";var l,c,f=t.findAsteriskPattern(r,u),s=r.getNextSet(f[1]),h=r.getSize();do{t.recordPattern(r,s,u);var _=t.toNarrowWidePattern(u);if(_<0)throw new NotFoundException_1.default;l=t.patternToChar(_),this.decodeRowResult+=l,c=s;try{for(var R=(n=void 0,__values(u)),w=R.next();!w.done;w=R.next()){s+=w.value}}catch(e){n={error:e}}finally{try{w&&!w.done&&(i=R.return)&&i.call(R)}finally{if(n)throw n.error}}s=r.getNextSet(s)}while("*"!==l);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C,v=0;try{for(var A=__values(u),E=A.next();!E.done;E=A.next()){v+=E.value}}catch(e){a={error:e}}finally{try{E&&!E.done&&(d=A.return)&&d.call(A)}finally{if(a)throw a.error}}if(s!==h&&2*(s-c-v)<v)throw new NotFoundException_1.default;if(this.usingCheckDigit){for(var p=this.decodeRowResult.length-1,x=0,g=0;g<p;g++)x+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(g));if(this.decodeRowResult.charAt(p)!==t.ALPHABET_STRING.charAt(x%43))throw new ChecksumException_1.default;this.decodeRowResult=this.decodeRowResult.substring(0,p)}if(0===this.decodeRowResult.length)throw new NotFoundException_1.default;C=this.extendedMode?t.decodeExtended(this.decodeRowResult):this.decodeRowResult;var N=(f[1]+f[0])/2,S=c+v/2;return new Result_1.default(C,null,0,[new ResultPoint_1.default(N,e),new ResultPoint_1.default(S,e)],BarcodeFormat_1.default.CODE_39,(new Date).getTime())},t.findAsteriskPattern=function(e,r){for(var o=e.getSize(),n=e.getNextSet(0),i=0,a=n,d=!1,u=r.length,l=n;l<o;l++)if(e.get(l)!==d)r[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,a-Math.floor((l-a)/2)),a,!1))return[a,l];a+=r[0]+r[1],r.copyWithin(0,2,2+i-1),r[i-1]=0,r[i]=0,i--}else i++;r[i]=1,d=!d}throw new NotFoundException_1.default},t.toNarrowWidePattern=function(e){var t,r,o,n=e.length,i=0;do{var a=2147483647;try{for(var d=(t=void 0,__values(e)),u=d.next();!u.done;u=d.next()){(s=u.value)<a&&s>i&&(a=s)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}i=a,o=0;for(var l=0,c=0,f=0;f<n;f++){(s=e[f])>i&&(c|=1<<n-1-f,o++,l+=s)}if(3===o){for(f=0;f<n&&o>0;f++){var s;if((s=e[f])>i&&(o--,2*s>=l))return-1}return c}}while(o>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new NotFoundException_1.default},t.decodeExtended=function(e){for(var t=e.length,r="",o=0;o<t;o++){var n=e.charAt(o);if("+"===n||"$"===n||"%"===n||"/"===n){var i=e.charAt(o+1),a="\0";switch(n){case"+":if(!(i>="A"&&i<="Z"))throw new FormatException_1.default;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new FormatException_1.default;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new FormatException_1.default;a=""}break;case"/":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new FormatException_1.default;a=":"}}r+=a,o++}else r+=n}return r},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(OneDReader_1.default);exports.default=Code39Reader;
//# sourceMappingURL=/sm/6ee38ed7535235c921bd297728843914ae14ce1226834e12f2b0742b7d17fea7.map