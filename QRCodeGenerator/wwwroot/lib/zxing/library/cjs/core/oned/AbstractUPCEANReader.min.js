/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/oned/AbstractUPCEANReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])},r(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var OneDReader_1=require("./OneDReader"),NotFoundException_1=require("../NotFoundException"),FormatException_1=require("../FormatException"),AbstractUPCEANReader=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return __extends(t,r),t.findStartGuardPattern=function(r){for(var e,n=!1,a=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]);var A=(e=t.findGuardPattern(r,a,!1,this.START_END_PATTERN,o))[0],f=A-((a=e[1])-A);f>=0&&(n=r.isRange(f,A,!1))}return e},t.checkChecksum=function(r){return t.checkStandardUPCEANChecksum(r)},t.checkStandardUPCEANChecksum=function(r){var e=r.length;if(0===e)return!1;var n=parseInt(r.charAt(e-1),10);return t.getStandardUPCEANChecksum(r.substring(0,e-1))===n},t.getStandardUPCEANChecksum=function(r){for(var t=r.length,e=0,n=t-1;n>=0;n-=2){if((a=r.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||a>9)throw new FormatException_1.default;e+=a}e*=3;for(n=t-2;n>=0;n-=2){var a;if((a=r.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||a>9)throw new FormatException_1.default;e+=a}return(1e3-e)%10},t.decodeEnd=function(r,e){return t.findGuardPattern(r,e,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(r,t,e,n){return this.findGuardPattern(r,t,e,n,new Int32Array(n.length))},t.findGuardPattern=function(r,e,n,a,o){for(var A=r.getSize(),f=0,u=e=n?r.getNextUnset(e):r.getNextSet(e),i=a.length,c=n,d=e;d<A;d++)if(r.get(d)!==c)o[f]++;else{if(f===i-1){if(OneDReader_1.default.patternMatchVariance(o,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([u,d]);u+=o[0]+o[1];for(var _=o.slice(2,o.length),h=0;h<f-1;h++)o[h]=_[h];o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new NotFoundException_1.default},t.decodeDigit=function(r,e,n,a){this.recordPattern(r,n,e);for(var o=this.MAX_AVG_VARIANCE,A=-1,f=a.length,u=0;u<f;u++){var i=a[u],c=OneDReader_1.default.patternMatchVariance(e,i,t.MAX_INDIVIDUAL_VARIANCE);c<o&&(o=c,A=u)}if(A>=0)return A;throw new NotFoundException_1.default},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(OneDReader_1.default);exports.default=AbstractUPCEANReader;
//# sourceMappingURL=/sm/7b5024d0f55b900bfa2c543abaab3f04e7f33f0d84fa8ba08a1ade71480d897a.map