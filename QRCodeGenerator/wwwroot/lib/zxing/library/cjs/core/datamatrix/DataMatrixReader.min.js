/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/datamatrix/DataMatrixReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var BarcodeFormat_1=require("../BarcodeFormat"),BitMatrix_1=require("../common/BitMatrix"),DecodeHintType_1=require("../DecodeHintType"),NotFoundException_1=require("../NotFoundException"),Result_1=require("../Result"),ResultMetadataType_1=require("../ResultMetadataType"),System_1=require("../util/System"),Decoder_1=require("./decoder/Decoder"),Detector_1=require("./detector/Detector"),DataMatrixReader=function(){function e(){this.decoder=new Decoder_1.default}return e.prototype.decode=function(t,r){var a,o;if(void 0===r&&(r=null),null!=r&&r.has(DecodeHintType_1.default.PURE_BARCODE)){var u=e.extractPureBits(t.getBlackMatrix());a=this.decoder.decode(u),o=e.NO_POINTS}else{var i=new Detector_1.default(t.getBlackMatrix()).detect();a=this.decoder.decode(i.getBits()),o=i.getPoints()}var d=a.getRawBytes(),n=new Result_1.default(a.getText(),d,8*d.length,o,BarcodeFormat_1.default.DATA_MATRIX,System_1.default.currentTimeMillis()),l=a.getByteSegments();null!=l&&n.putMetadata(ResultMetadataType_1.default.BYTE_SEGMENTS,l);var c=a.getECLevel();return null!=c&&n.putMetadata(ResultMetadataType_1.default.ERROR_CORRECTION_LEVEL,c),n},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null==t||null==r)throw new NotFoundException_1.default;var a=this.moduleSize(t,e),o=t[1],u=r[1],i=t[0],d=(r[0]-i+1)/a,n=(u-o+1)/a;if(d<=0||n<=0)throw new NotFoundException_1.default;var l=a/2;o+=l,i+=l;for(var c=new BitMatrix_1.default(d,n),_=0;_<n;_++)for(var f=o+_*a,s=0;s<d;s++)e.get(i+s*a,f)&&c.set(s,_);return c},e.moduleSize=function(e,t){for(var r=t.getWidth(),a=e[0],o=e[1];a<r&&t.get(a,o);)a++;if(a===r)throw new NotFoundException_1.default;var u=a-e[0];if(0===u)throw new NotFoundException_1.default;return u},e.NO_POINTS=[],e}();exports.default=DataMatrixReader;
//# sourceMappingURL=/sm/1df3023fa770216640d8e4d3c58822a9ed8bb8f872bc1c3425bbc916fbc14b2d.map