/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/datamatrix/decoder/DecodedBitStreamParser.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Mode,DecoderResult_1=require("../../common/DecoderResult"),BitSource_1=require("../../common/BitSource"),StringBuilder_1=require("../../util/StringBuilder"),StringEncoding_1=require("../../util/StringEncoding"),StringUtils_1=require("../../common/StringUtils"),FormatException_1=require("../../FormatException"),IllegalStateException_1=require("../../IllegalStateException");!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(Mode||(Mode={}));var DecodedBitStreamParser=function(){function e(){}return e.decode=function(e){var a=new BitSource_1.default(e),r=new StringBuilder_1.default,t=new StringBuilder_1.default,n=new Array,i=Mode.ASCII_ENCODE;do{if(i===Mode.ASCII_ENCODE)i=this.decodeAsciiSegment(a,r,t);else{switch(i){case Mode.C40_ENCODE:this.decodeC40Segment(a,r);break;case Mode.TEXT_ENCODE:this.decodeTextSegment(a,r);break;case Mode.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,r);break;case Mode.EDIFACT_ENCODE:this.decodeEdifactSegment(a,r);break;case Mode.BASE256_ENCODE:this.decodeBase256Segment(a,r,n);break;default:throw new FormatException_1.default}i=Mode.ASCII_ENCODE}}while(i!==Mode.PAD_ENCODE&&a.available()>0);return t.length()>0&&r.append(t.toString()),new DecoderResult_1.default(e,r.toString(),0===n.length?null:n,null)},e.decodeAsciiSegment=function(e,a,r){var t=!1;do{var n=e.readBits(8);if(0===n)throw new FormatException_1.default;if(n<=128)return t&&(n+=128),a.append(String.fromCharCode(n-1)),Mode.ASCII_ENCODE;if(129===n)return Mode.PAD_ENCODE;if(n<=229){var i=n-130;i<10&&a.append("0"),a.append(""+i)}else switch(n){case 230:return Mode.C40_ENCODE;case 231:return Mode.BASE256_ENCODE;case 232:a.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:t=!0;break;case 236:a.append("[)>05"),r.insert(0,"");break;case 237:a.append("[)>06"),r.insert(0,"");break;case 238:return Mode.ANSIX12_ENCODE;case 239:return Mode.TEXT_ENCODE;case 240:return Mode.EDIFACT_ENCODE;default:if(254!==n||0!==e.available())throw new FormatException_1.default}}while(e.available()>0);return Mode.ASCII_ENCODE},e.decodeC40Segment=function(e,a){var r=!1,t=[],n=0;do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),t);for(var o=0;o<3;o++){var d=t[o];switch(n){case 0:if(d<3)n=d+1;else{if(!(d<this.C40_BASIC_SET_CHARS.length))throw new FormatException_1.default;var E=this.C40_BASIC_SET_CHARS[d];r?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),r=!1):a.append(E)}break;case 1:r?(a.append(String.fromCharCode(d+128)),r=!1):a.append(String.fromCharCode(d)),n=0;break;case 2:if(d<this.C40_SHIFT2_SET_CHARS.length){E=this.C40_SHIFT2_SET_CHARS[d];r?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),r=!1):a.append(E)}else switch(d){case 27:a.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new FormatException_1.default}n=0;break;case 3:r?(a.append(String.fromCharCode(d+224)),r=!1):a.append(String.fromCharCode(d+96)),n=0;break;default:throw new FormatException_1.default}}}while(e.available()>0)},e.decodeTextSegment=function(e,a){var r=!1,t=[],n=0;do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),t);for(var o=0;o<3;o++){var d=t[o];switch(n){case 0:if(d<3)n=d+1;else{if(!(d<this.TEXT_BASIC_SET_CHARS.length))throw new FormatException_1.default;var E=this.TEXT_BASIC_SET_CHARS[d];r?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),r=!1):a.append(E)}break;case 1:r?(a.append(String.fromCharCode(d+128)),r=!1):a.append(String.fromCharCode(d)),n=0;break;case 2:if(d<this.TEXT_SHIFT2_SET_CHARS.length){E=this.TEXT_SHIFT2_SET_CHARS[d];r?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),r=!1):a.append(E)}else switch(d){case 27:a.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new FormatException_1.default}n=0;break;case 3:if(!(d<this.TEXT_SHIFT3_SET_CHARS.length))throw new FormatException_1.default;E=this.TEXT_SHIFT3_SET_CHARS[d];r?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),r=!1):a.append(E),n=0;break;default:throw new FormatException_1.default}}}while(e.available()>0)},e.decodeAnsiX12Segment=function(e,a){var r=[];do{if(8===e.available())return;var t=e.readBits(8);if(254===t)return;this.parseTwoBytes(t,e.readBits(8),r);for(var n=0;n<3;n++){var i=r[n];switch(i){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(i<14)a.append(String.fromCharCode(i+44));else{if(!(i<40))throw new FormatException_1.default;a.append(String.fromCharCode(i+51))}}}}while(e.available()>0)},e.parseTwoBytes=function(e,a,r){var t=(e<<8)+a-1,n=Math.floor(t/1600);r[0]=n,t-=1600*n,n=Math.floor(t/40),r[1]=n,r[2]=t-40*n},e.decodeEdifactSegment=function(e,a){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var t=e.readBits(6);if(31===t){var n=8-e.getBitOffset();return void(8!==n&&e.readBits(n))}0==(32&t)&&(t|=64),a.append(String.fromCharCode(t))}}while(e.available()>0)},e.decodeBase256Segment=function(e,a,r){var t,n=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),n++);if((t=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),n++))<0)throw new FormatException_1.default;for(var o=new Uint8Array(t),d=0;d<t;d++){if(e.available()<8)throw new FormatException_1.default;o[d]=this.unrandomize255State(e.readBits(8),n++)}r.push(o);try{a.append(StringEncoding_1.default.decode(o,StringUtils_1.default.ISO88591))}catch(e){throw new IllegalStateException_1.default("Platform does not support required encoding: "+e.message)}},e.unrandomize255State=function(e,a){var r=e-(149*a%255+1);return r>=0?r:r+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],e}();exports.default=DecodedBitStreamParser;
//# sourceMappingURL=/sm/6c392a70f123f879d4e2f8ec1215bf75d26c21146c900d328a29d137b9414f6d.map