/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/datamatrix/DataMatrixWriter.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var BarcodeFormat_1=require("../BarcodeFormat"),BitMatrix_1=require("../common/BitMatrix"),EncodeHintType_1=require("../EncodeHintType"),ByteMatrix_1=require("../qrcode/encoder/ByteMatrix"),Charset_1=require("../util/Charset"),encoder_1=require("./encoder"),DataMatrixWriter=function(){function e(){}return e.prototype.encode=function(e,t,r,o,n){if(void 0===n&&(n=null),""===e.trim())throw new Error("Found empty contents");if(t!==BarcodeFormat_1.default.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+t);if(r<0||o<0)throw new Error("Requested dimensions can't be negative: "+r+"x"+o);var a,i=0,l=null,d=null;if(null!=n){var u=n.get(EncodeHintType_1.default.DATA_MATRIX_SHAPE);null!=u&&(i=u);var c=n.get(EncodeHintType_1.default.MIN_SIZE);null!=c&&(l=c);var _=n.get(EncodeHintType_1.default.MAX_SIZE);null!=_&&(d=_)}if(null!=n&&n.has(EncodeHintType_1.default.DATA_MATRIX_COMPACT)&&Boolean(n.get(EncodeHintType_1.default.DATA_MATRIX_COMPACT).toString())){var f=n.has(EncodeHintType_1.default.GS1_FORMAT)&&Boolean(n.get(EncodeHintType_1.default.GS1_FORMAT).toString()),g=null;n.has(EncodeHintType_1.default.CHARACTER_SET)&&(g=Charset_1.default.forName(n.get(EncodeHintType_1.default.CHARACTER_SET).toString())),a=encoder_1.MinimalEncoder.encodeHighLevel(e,g,f?29:-1,i)}else{var h=null!=n&&n.has(EncodeHintType_1.default.FORCE_C40)&&Boolean(n.get(EncodeHintType_1.default.FORCE_C40).toString());a=encoder_1.HighLevelEncoder.encodeHighLevel(e,i,l,d,h)}var y=encoder_1.SymbolInfo.lookup(a.length,i,l,d,!0),T=encoder_1.ErrorCorrection.encodeECC200(a,y),m=new encoder_1.DefaultPlacement(T,y.getSymbolDataWidth(),y.getSymbolDataHeight());return m.place(),this.encodeLowLevel(m,y,r,o)},e.prototype.encodeLowLevel=function(e,t,r,o){for(var n=t.getSymbolDataWidth(),a=t.getSymbolDataHeight(),i=new ByteMatrix_1.default(t.getSymbolWidth(),t.getSymbolHeight()),l=0,d=0;d<a;d++){var u=void 0;if(d%t.matrixHeight==0){u=0;for(var c=0;c<t.getSymbolWidth();c++)i.setBoolean(u,l,c%2==0),u++;l++}u=0;for(c=0;c<n;c++)c%t.matrixWidth==0&&(i.setBoolean(u,l,!0),u++),i.setBoolean(u,l,e.getBit(c,d)),u++,c%t.matrixWidth==t.matrixWidth-1&&(i.setBoolean(u,l,d%2==0),u++);if(l++,d%t.matrixHeight==t.matrixHeight-1){u=0;for(c=0;c<t.getSymbolWidth();c++)i.setBoolean(u,l,!0),u++;l++}}return this.convertByteMatrixToBitMatrix(i,r,o)},e.prototype.convertByteMatrixToBitMatrix=function(e,t,r){var o,n=e.getWidth(),a=e.getHeight(),i=Math.max(t,n),l=Math.max(r,a),d=Math.min(i/n,l/a),u=(i-n*d)/2,c=(l-a*d)/2;r<a||t<n?(u=0,c=0,o=new BitMatrix_1.default(n,a)):o=new BitMatrix_1.default(t,r),o.clear();for(var _=0,f=c;_<a;_++,f+=d)for(var g=0,h=u;g<n;g++,h+=d)1===e.get(g,_)&&o.setRegion(h,f,d,d);return o},e}();exports.default=DataMatrixWriter;
//# sourceMappingURL=/sm/6c3d4a5d07ce78eeb646a552b3f411e1f6302063f3b8012432def22a380a068e.map