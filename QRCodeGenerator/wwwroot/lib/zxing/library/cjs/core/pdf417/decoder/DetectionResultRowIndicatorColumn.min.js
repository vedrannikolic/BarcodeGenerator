/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/pdf417/decoder/DetectionResultRowIndicatorColumn.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},e(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var PDF417Common_1=require("../PDF417Common"),BarcodeMetadata_1=require("./BarcodeMetadata"),DetectionResultColumn_1=require("./DetectionResultColumn"),BarcodeValue_1=require("./BarcodeValue"),DetectionResultRowIndicatorColumn=function(e){function t(t,o){var r=e.call(this,t)||this;return r._isLeft=o,r}return __extends(t,e),t.prototype.setRowNumbers=function(){var e,t;try{for(var o=__values(this.getCodewords()),r=o.next();!r.done;r=o.next()){var n=r.value;null!=n&&n.setRowNumberAsRowIndicatorColumn()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);for(var o=this.getBoundingBox(),r=this._isLeft?o.getTopLeft():o.getTopRight(),n=this._isLeft?o.getBottomLeft():o.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(n.getY())),l=-1,i=1,s=0,c=u;c<a;c++)if(null!=t[c]){var d=t[c],f=d.getRowNumber()-l;if(0===f)s++;else if(1===f)i=Math.max(i,s),s=1,l=d.getRowNumber();else if(f<0||d.getRowNumber()>=e.getRowCount()||f>c)t[c]=null;else{for(var g=void 0,w=(g=i>2?(i-2)*f:f)>=c,h=1;h<=g&&!w;h++)w=null!=t[c-h];w?t[c]=null:(l=d.getRowNumber(),s=1)}}},t.prototype.getRowHeights=function(){var e,t,o=this.getBarcodeMetadata();if(null==o)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);var r=new Int32Array(o.getRowCount());try{for(var n=__values(this.getCodewords()),u=n.next();!u.done;u=n.next()){var a=u.value;if(null!=a){var l=a.getRowNumber();if(l>=r.length)continue;r[l]++}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var t=this.getBoundingBox(),o=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),n=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.getCodewords(),l=-1,i=1,s=0,c=n;c<u;c++)if(null!=a[c]){var d=a[c];d.setRowNumberAsRowIndicatorColumn();var f=d.getRowNumber()-l;0===f?s++:1===f?(i=Math.max(i,s),s=1,l=d.getRowNumber()):d.getRowNumber()>=e.getRowCount()?a[c]=null:(l=d.getRowNumber(),s=1)}},t.prototype.getBarcodeMetadata=function(){var e,t,o=this.getCodewords(),r=new BarcodeValue_1.default,n=new BarcodeValue_1.default,u=new BarcodeValue_1.default,a=new BarcodeValue_1.default;try{for(var l=__values(o),i=l.next();!i.done;i=l.next()){var s=i.value;if(null!=s){s.setRowNumberAsRowIndicatorColumn();var c=s.getValue()%30,d=s.getRowNumber();switch(this._isLeft||(d+=2),d%3){case 0:n.setValue(3*c+1);break;case 1:a.setValue(c/3),u.setValue(c%3);break;case 2:r.setValue(c+1)}}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}if(0===r.getValue().length||0===n.getValue().length||0===u.getValue().length||0===a.getValue().length||r.getValue()[0]<1||n.getValue()[0]+u.getValue()[0]<PDF417Common_1.default.MIN_ROWS_IN_BARCODE||n.getValue()[0]+u.getValue()[0]>PDF417Common_1.default.MAX_ROWS_IN_BARCODE)return null;var f=new BarcodeMetadata_1.default(r.getValue()[0],n.getValue()[0],u.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(o,f),f},t.prototype.removeIncorrectCodewords=function(e,t){for(var o=0;o<e.length;o++){var r=e[o];if(null!=e[o]){var n=r.getValue()%30,u=r.getRowNumber();if(u>t.getRowCount())e[o]=null;else switch(this._isLeft||(u+=2),u%3){case 0:3*n+1!==t.getRowCountUpperPart()&&(e[o]=null);break;case 1:Math.trunc(n/3)===t.getErrorCorrectionLevel()&&n%3===t.getRowCountLowerPart()||(e[o]=null);break;case 2:n+1!==t.getColumnCount()&&(e[o]=null)}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+e.prototype.toString.call(this)},t}(DetectionResultColumn_1.default);exports.default=DetectionResultRowIndicatorColumn;
//# sourceMappingURL=/sm/7dc2a8fec084d53e273a374183f4990dd2e388b7092abfb62d453ec080b79daf.map