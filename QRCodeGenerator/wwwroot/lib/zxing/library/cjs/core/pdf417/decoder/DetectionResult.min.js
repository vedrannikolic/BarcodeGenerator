/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/pdf417/decoder/DetectionResult.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __values=this&&this.__values||function(t){var o="function"==typeof Symbol&&Symbol.iterator,e=o&&t[o],u=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&u>=t.length&&(t=void 0),{value:t&&t[u++],done:!t}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var PDF417Common_1=require("../PDF417Common"),Formatter_1=require("../../util/Formatter"),DetectionResult=function(){function t(t,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t,o=PDF417Common_1.default.MAX_CODEWORDS_IN_BARCODE;do{t=o,o=this.adjustRowNumbersAndGetCount()}while(o>0&&o<t);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(0===t)return 0;for(var o=1;o<this.barcodeColumnCount+1;o++)for(var e=this.detectionResultColumns[o].getCodewords(),u=0;u<e.length;u++)null!=e[u]&&(e[u].hasValidRowNumber()||this.adjustRowNumbers(o,u,e));return t},t.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var t=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),e=0;e<t.length;e++)if(null!=t[e]&&null!=o[e]&&t[e].getRowNumber()===o[e].getRowNumber())for(var u=1;u<=this.barcodeColumnCount;u++){var n=this.detectionResultColumns[u].getCodewords()[e];null!=n&&(n.setRowNumber(t[e].getRowNumber()),n.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[e]=null))}},t.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var o=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),u=0;u<e.length;u++)if(null!=e[u])for(var n=e[u].getRowNumber(),r=0,s=this.barcodeColumnCount+1;s>0&&r<this.ADJUST_ROW_NUMBER_SKIP;s--){var l=this.detectionResultColumns[s].getCodewords()[u];null!=l&&(r=t.adjustRowNumberIfValid(n,r,l),l.hasValidRowNumber()||o++)}return o},t.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var o=0,e=this.detectionResultColumns[0].getCodewords(),u=0;u<e.length;u++)if(null!=e[u])for(var n=e[u].getRowNumber(),r=0,s=1;s<this.barcodeColumnCount+1&&r<this.ADJUST_ROW_NUMBER_SKIP;s++){var l=this.detectionResultColumns[s].getCodewords()[u];null!=l&&(r=t.adjustRowNumberIfValid(n,r,l),l.hasValidRowNumber()||o++)}return o},t.adjustRowNumberIfValid=function(t,o,e){return null==e||e.hasValidRowNumber()||(e.isValidRowNumber(t)?(e.setRowNumber(t),o=0):++o),o},t.prototype.adjustRowNumbers=function(o,e,u){var n,r;if(null!=this.detectionResultColumns[o-1]){var s=u[e],l=this.detectionResultColumns[o-1].getCodewords(),i=l;null!=this.detectionResultColumns[o+1]&&(i=this.detectionResultColumns[o+1].getCodewords());var d=new Array(14);d[2]=l[e],d[3]=i[e],e>0&&(d[0]=u[e-1],d[4]=l[e-1],d[5]=i[e-1]),e>1&&(d[8]=u[e-2],d[10]=l[e-2],d[11]=i[e-2]),e<u.length-1&&(d[1]=u[e+1],d[6]=l[e+1],d[7]=i[e+1]),e<u.length-2&&(d[9]=u[e+2],d[12]=l[e+2],d[13]=i[e+2]);try{for(var a=__values(d),m=a.next();!m.done;m=a.next()){var C=m.value;if(t.adjustRowNumber(s,C))return}}catch(t){n={error:t}}finally{try{m&&!m.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.adjustRowNumber=function(t,o){return null!=o&&(!(!o.hasValidRowNumber()||o.getBucket()!==t.getBucket())&&(t.setRowNumber(o.getRowNumber()),!0))},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(t){this.boundingBox=t},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(t,o){this.detectionResultColumns[t]=o},t.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},t.prototype.toString=function(){var t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var o=new Formatter_1.default,e=0;e<t.getCodewords().length;e++){o.format("CW %3d:",e);for(var u=0;u<this.barcodeColumnCount+2;u++)if(null!=this.detectionResultColumns[u]){var n=this.detectionResultColumns[u].getCodewords()[e];null!=n?o.format(" %3d|%3d",n.getRowNumber(),n.getValue()):o.format("    |   ")}else o.format("    |   ");o.format("%n")}return o.toString()},t}();exports.default=DetectionResult;
//# sourceMappingURL=/sm/11f3bbb1e63b074a9436ed9019f8156e3fbdb58748763ddb69556f89bad5e3b7.map