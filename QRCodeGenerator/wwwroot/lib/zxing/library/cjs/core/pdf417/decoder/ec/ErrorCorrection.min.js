/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/pdf417/decoder/ec/ErrorCorrection.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var ChecksumException_1=require("../../../ChecksumException"),ModulusPoly_1=require("./ModulusPoly"),ModulusGF_1=require("./ModulusGF"),ErrorCorrection=function(){function e(){this.field=ModulusGF_1.default.PDF417_GF}return e.prototype.decode=function(e,t,r){for(var i,l,n=new ModulusPoly_1.default(this.field,e),o=new Int32Array(t),u=!1,f=t;f>0;f--){var s=n.evaluateAt(this.field.exp(f));o[t-f]=s,0!==s&&(u=!0)}if(!u)return 0;var a=this.field.getOne();if(null!=r)try{for(var d=__values(r),h=d.next();!h.done;h=d.next()){var c=h.value,g=this.field.exp(e.length-1-c),v=new ModulusPoly_1.default(this.field,new Int32Array([this.field.subtract(0,g),1]));a=a.multiply(v)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(i)throw i.error}}var y=new ModulusPoly_1.default(this.field,o),p=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),y,t),m=p[0],_=p[1],w=this.findErrorLocations(m),C=this.findErrorMagnitudes(_,m,w);for(f=0;f<w.length;f++){var M=e.length-1-this.field.log(w[f]);if(M<0)throw ChecksumException_1.default.getChecksumInstance();e[M]=this.field.subtract(e[M],C[f])}return w.length},e.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var l=e,n=t,o=this.field.getZero(),u=this.field.getOne();n.getDegree()>=Math.round(r/2);){var f=l,s=o;if(o=u,(l=n).isZero())throw ChecksumException_1.default.getChecksumInstance();n=f;for(var a=this.field.getZero(),d=l.getCoefficient(l.getDegree()),h=this.field.inverse(d);n.getDegree()>=l.getDegree()&&!n.isZero();){var c=n.getDegree()-l.getDegree(),g=this.field.multiply(n.getCoefficient(n.getDegree()),h);a=a.add(this.field.buildMonomial(c,g)),n=n.subtract(l.multiplyByMonomial(c,g))}u=a.multiply(o).subtract(s).negative()}var v=u.getCoefficient(0);if(0===v)throw ChecksumException_1.default.getChecksumInstance();var y=this.field.inverse(v);return[u.multiply(y),n.multiply(y)]},e.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,l=1;l<this.field.getSize()&&i<t;l++)0===e.evaluateAt(l)&&(r[i]=this.field.inverse(l),i++);if(i!==t)throw ChecksumException_1.default.getChecksumInstance();return r},e.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),l=new Int32Array(i),n=1;n<=i;n++)l[i-n]=this.field.multiply(n,t.getCoefficient(n));var o=new ModulusPoly_1.default(this.field,l),u=r.length,f=new Int32Array(u);for(n=0;n<u;n++){var s=this.field.inverse(r[n]),a=this.field.subtract(0,e.evaluateAt(s)),d=this.field.inverse(o.evaluateAt(s));f[n]=this.field.multiply(a,d)}return f},e}();exports.default=ErrorCorrection;
//# sourceMappingURL=/sm/4d615f194c5e7aee5da9ac3e293e277af111ca8b6a835607c2967ba3c447ddc0.map