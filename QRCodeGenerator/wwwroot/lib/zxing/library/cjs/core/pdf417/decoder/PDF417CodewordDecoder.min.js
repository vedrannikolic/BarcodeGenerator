/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/pdf417/decoder/PDF417CodewordDecoder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MathUtils_1=require("../../common/detector/MathUtils"),PDF417Common_1=require("../PDF417Common"),Float_1=require("../../util/Float"),PDF417CodewordDecoder=function(){function e(){}return e.initialize=function(){for(var o=0;o<PDF417Common_1.default.SYMBOL_TABLE.length;o++)for(var t=PDF417Common_1.default.SYMBOL_TABLE[o],r=1&t,a=0;a<PDF417Common_1.default.BARS_IN_MODULE;a++){for(var n=0;(1&t)===r;)n+=1,t>>=1;r=1&t,e.RATIOS_TABLE[o]||(e.RATIOS_TABLE[o]=new Array(PDF417Common_1.default.BARS_IN_MODULE)),e.RATIOS_TABLE[o][PDF417Common_1.default.BARS_IN_MODULE-a-1]=Math.fround(n/PDF417Common_1.default.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},e.getDecodedValue=function(o){var t=e.getDecodedCodewordValue(e.sampleBitCounts(o));return-1!==t?t:e.getClosestDecodedValue(o)},e.sampleBitCounts=function(e){for(var o=MathUtils_1.default.sum(e),t=new Int32Array(PDF417Common_1.default.BARS_IN_MODULE),r=0,a=0,n=0;n<PDF417Common_1.default.MODULES_IN_CODEWORD;n++){var u=o/(2*PDF417Common_1.default.MODULES_IN_CODEWORD)+n*o/PDF417Common_1.default.MODULES_IN_CODEWORD;a+e[r]<=u&&(a+=e[r],r++),t[r]++}return t},e.getDecodedCodewordValue=function(o){var t=e.getBitValue(o);return-1===PDF417Common_1.default.getCodeword(t)?-1:t},e.getBitValue=function(e){for(var o=0,t=0;t<e.length;t++)for(var r=0;r<e[t];r++)o=o<<1|(t%2==0?1:0);return Math.trunc(o)},e.getClosestDecodedValue=function(o){var t=MathUtils_1.default.sum(o),r=new Array(PDF417Common_1.default.BARS_IN_MODULE);if(t>1)for(var a=0;a<r.length;a++)r[a]=Math.fround(o[a]/t);var n=Float_1.default.MAX_VALUE,u=-1;this.bSymbolTableReady||e.initialize();for(var _=0;_<e.RATIOS_TABLE.length;_++){for(var l=0,d=e.RATIOS_TABLE[_],m=0;m<PDF417Common_1.default.BARS_IN_MODULE;m++){var D=Math.fround(d[m]-r[m]);if((l+=Math.fround(D*D))>=n)break}l<n&&(n=l,u=PDF417Common_1.default.SYMBOL_TABLE[_])}return u},e.bSymbolTableReady=!1,e.RATIOS_TABLE=new Array(PDF417Common_1.default.SYMBOL_TABLE.length).map((function(e){return new Array(PDF417Common_1.default.BARS_IN_MODULE)})),e}();exports.default=PDF417CodewordDecoder;
//# sourceMappingURL=/sm/c8df31e658cbb79585ac7014fa2d6190db281d73104398edf19df28bd89a347e.map