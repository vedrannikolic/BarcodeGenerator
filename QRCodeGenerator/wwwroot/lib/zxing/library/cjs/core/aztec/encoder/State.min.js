/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/aztec/encoder/State.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __values=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var BitArray_1=require("../../common/BitArray"),TokenHelpers=require("./TokenHelpers"),C=require("./EncoderConstants"),LatchTable=require("./LatchTable"),ShiftTable=require("./ShiftTable"),StringUtils_1=require("../../common/StringUtils"),State=function(){function t(t,e,i,n){this.token=t,this.mode=e,this.binaryShiftByteCount=i,this.bitCount=n}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,i){var n=this.bitCount,r=this.token;if(e!==this.mode){var o=LatchTable.LATCH_TABLE[this.mode][e];r=TokenHelpers.add(r,65535&o,o>>16),n+=o>>16}var a=e===C.MODE_DIGIT?4:5;return new t(r=TokenHelpers.add(r,i,a),e,0,n+a)},t.prototype.shiftAndAppend=function(e,i){var n=this.token,r=this.mode===C.MODE_DIGIT?4:5;return n=TokenHelpers.add(n,ShiftTable.SHIFT_TABLE[this.mode][e],r),new t(n=TokenHelpers.add(n,i,5),this.mode,0,this.bitCount+r+5)},t.prototype.addBinaryShiftChar=function(e){var i=this.token,n=this.mode,r=this.bitCount;if(this.mode===C.MODE_PUNCT||this.mode===C.MODE_DIGIT){var o=LatchTable.LATCH_TABLE[n][C.MODE_UPPER];i=TokenHelpers.add(i,65535&o,o>>16),r+=o>>16,n=C.MODE_UPPER}var a=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,h=new t(i,n,this.binaryShiftByteCount+1,r+a);return 2078===h.binaryShiftByteCount&&(h=h.endBinaryShift(e+1)),h},t.prototype.endBinaryShift=function(e){if(0===this.binaryShiftByteCount)return this;var i=this.token;return new t(i=TokenHelpers.addBinaryShift(i,e-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var i=this.bitCount+(LatchTable.LATCH_TABLE[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?i+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(i+=10),i<=e.bitCount},t.prototype.toBitArray=function(t){for(var e,i,n=[],r=this.endBinaryShift(t.length).token;null!==r;r=r.getPrevious())n.unshift(r);var o=new BitArray_1.default;try{for(var a=__values(n),h=a.next();!h.done;h=a.next()){h.value.appendTo(o,t)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}return o},t.prototype.toString=function(){return StringUtils_1.default.format("%s bits=%d bytes=%d",C.MODE_NAMES[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(C.EMPTY_TOKEN,C.MODE_UPPER,0,0),t}();exports.default=State;
//# sourceMappingURL=/sm/cdb9f7330c1fc571dec54329486db7940b1b0aca98c1ed4f87e4c03ca8270c71.map