/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/aztec/encoder/HighLevelEncoder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __values=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],a=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0});var Collections_1=require("../../util/Collections"),State_1=require("./State"),C=require("./EncoderConstants"),CharMap=require("./CharMap"),ShiftTable=require("./ShiftTable"),StringUtils_1=require("../../common/StringUtils"),HighLevelEncoder=function(){function t(t){this.text=t}return t.prototype.encode=function(){for(var e=StringUtils_1.default.getCharCode(" "),r=StringUtils_1.default.getCharCode("\n"),a=Collections_1.default.singletonList(State_1.default.INITIAL_STATE),i=0;i<this.text.length;i++){var n=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case StringUtils_1.default.getCharCode("\r"):n=o===r?2:0;break;case StringUtils_1.default.getCharCode("."):n=o===e?3:0;break;case StringUtils_1.default.getCharCode(","):n=o===e?4:0;break;case StringUtils_1.default.getCharCode(":"):n=o===e?5:0;break;default:n=0}n>0?(a=t.updateStateListForPair(a,i,n),i++):a=this.updateStateListForChar(a,i)}return Collections_1.default.min(a,(function(t,e){return t.getBitCount()-e.getBitCount()})).toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var a,i,n=[];try{for(var o=__values(e),l=o.next();!l.done;l=o.next()){var u=l.value;this.updateStateForChar(u,r,n)}}catch(t){a={error:t}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}return t.simplifyStates(n)},t.prototype.updateStateForChar=function(t,e,r){for(var a=255&this.text[e],i=CharMap.CHAR_MAP[t.getMode()][a]>0,n=null,o=0;o<=C.MODE_PUNCT;o++){var l=CharMap.CHAR_MAP[o][a];if(l>0){if(null==n&&(n=t.endBinaryShift(e)),!i||o===t.getMode()||o===C.MODE_DIGIT){var u=n.latchAndAppend(o,l);r.push(u)}if(!i&&ShiftTable.SHIFT_TABLE[t.getMode()][o]>=0){var f=n.shiftAndAppend(o,l);r.push(f)}}}if(t.getBinaryShiftByteCount()>0||0===CharMap.CHAR_MAP[t.getMode()][a]){var h=t.addBinaryShiftChar(e);r.push(h)}},t.updateStateListForPair=function(t,e,r){var a,i,n=[];try{for(var o=__values(t),l=o.next();!l.done;l=o.next()){var u=l.value;this.updateStateForPair(u,e,r,n)}}catch(t){a={error:t}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}return this.simplifyStates(n)},t.updateStateForPair=function(t,e,r,a){var i=t.endBinaryShift(e);if(a.push(i.latchAndAppend(C.MODE_PUNCT,r)),t.getMode()!==C.MODE_PUNCT&&a.push(i.shiftAndAppend(C.MODE_PUNCT,r)),3===r||4===r){var n=i.latchAndAppend(C.MODE_DIGIT,16-r).latchAndAppend(C.MODE_DIGIT,1);a.push(n)}if(t.getBinaryShiftByteCount()>0){var o=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);a.push(o)}},t.simplifyStates=function(t){var e,r,a,i,n=[];try{for(var o=__values(t),l=o.next();!l.done;l=o.next()){var u=l.value,f=!0,h=function(t){if(t.isBetterThanOrEqualTo(u))return f=!1,"break";u.isBetterThanOrEqualTo(t)&&(n=n.filter((function(e){return e!==t})))};try{for(var d=(a=void 0,__values(n)),s=d.next();!s.done;s=d.next()){if("break"===h(s.value))break}}catch(t){a={error:t}}finally{try{s&&!s.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}f&&n.push(u)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t}();exports.default=HighLevelEncoder;
//# sourceMappingURL=/sm/09588b1c834890e27dd86a79c31efaa65bcfc9b6acee37197db224997fe39164.map