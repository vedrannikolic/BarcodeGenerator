/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/common/BitMatrix.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var BitArray_1=require("./BitArray"),System_1=require("../util/System"),Arrays_1=require("../util/Arrays"),StringBuilder_1=require("../util/StringBuilder"),IllegalArgumentException_1=require("../IllegalArgumentException"),BitMatrix=function(){function t(t,e,i,r){if(this.width=t,this.height=e,this.rowSize=i,this.bits=r,null==e&&(e=t),this.height=e,t<1||e<1)throw new IllegalArgumentException_1.default("Both dimensions must be greater than 0");null==i&&(i=Math.floor((t+31)/32)),this.rowSize=i,null==r&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var i=e.length,r=e[0].length,o=new t(r,i),n=0;n<i;n++)for(var h=e[n],s=0;s<r;s++)h[s]&&o.set(s,n);return o},t.parseFromString=function(e,i,r){if(null===e)throw new IllegalArgumentException_1.default("stringRepresentation cannot be null");for(var o=new Array(e.length),n=0,h=0,s=-1,a=0,l=0;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(n>h){if(-1===s)s=n-h;else if(n-h!==s)throw new IllegalArgumentException_1.default("row lengths do not match");h=n,a++}l++}else if(e.substring(l,l+i.length)===i)l+=i.length,o[n]=!0,n++;else{if(e.substring(l,l+r.length)!==r)throw new IllegalArgumentException_1.default("illegal character encountered: "+e.substring(l));l+=r.length,o[n]=!1,n++}if(n>h){if(-1===s)s=n-h;else if(n-h!==s)throw new IllegalArgumentException_1.default("row lengths do not match");a++}for(var u=new t(s,a),f=0;f<n;f++)o[f]&&u.set(Math.floor(f%s),Math.floor(f/s));return u},t.prototype.get=function(t,e){var i=e*this.rowSize+Math.floor(t/32);return 0!=(this.bits[i]>>>(31&t)&1)},t.prototype.set=function(t,e){var i=e*this.rowSize+Math.floor(t/32);this.bits[i]|=1<<(31&t)&4294967295},t.prototype.unset=function(t,e){var i=e*this.rowSize+Math.floor(t/32);this.bits[i]&=~(1<<(31&t)&4294967295)},t.prototype.flip=function(t,e){var i=e*this.rowSize+Math.floor(t/32);this.bits[i]^=1<<(31&t)&4294967295},t.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new IllegalArgumentException_1.default("input matrix dimensions do not match");for(var e=new BitArray_1.default(Math.floor(this.width/32)+1),i=this.rowSize,r=this.bits,o=0,n=this.height;o<n;o++)for(var h=o*i,s=t.getRow(o,e).getBitArray(),a=0;a<i;a++)r[h+a]^=s[a]},t.prototype.clear=function(){for(var t=this.bits,e=t.length,i=0;i<e;i++)t[i]=0},t.prototype.setRegion=function(t,e,i,r){if(e<0||t<0)throw new IllegalArgumentException_1.default("Left and top must be nonnegative");if(r<1||i<1)throw new IllegalArgumentException_1.default("Height and width must be at least 1");var o=t+i,n=e+r;if(n>this.height||o>this.width)throw new IllegalArgumentException_1.default("The region must fit inside the matrix");for(var h=this.rowSize,s=this.bits,a=e;a<n;a++)for(var l=a*h,u=t;u<o;u++)s[l+Math.floor(u/32)]|=1<<(31&u)&4294967295},t.prototype.getRow=function(t,e){null==e||e.getSize()<this.width?e=new BitArray_1.default(this.width):e.clear();for(var i=this.rowSize,r=this.bits,o=t*i,n=0;n<i;n++)e.setBulk(32*n,r[o+n]);return e},t.prototype.setRow=function(t,e){System_1.default.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),i=new BitArray_1.default(t),r=new BitArray_1.default(t),o=0,n=Math.floor((e+1)/2);o<n;o++)i=this.getRow(o,i),r=this.getRow(e-1-o,r),i.reverse(),r.reverse(),this.setRow(o,r),this.setRow(e-1-o,i)},t.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,i=this.rowSize,r=this.bits,o=t,n=e,h=-1,s=-1,a=0;a<e;a++)for(var l=0;l<i;l++){var u=r[a*i+l];if(0!==u){if(a<n&&(n=a),a>s&&(s=a),32*l<o){for(var f=0;0==(u<<31-f&4294967295);)f++;32*l+f<o&&(o=32*l+f)}if(32*l+31>h){for(f=31;u>>>f==0;)f--;32*l+f>h&&(h=32*l+f)}}}return h<o||s<n?null:Int32Array.from([o,n,h-o+1,s-n+1])},t.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,i=0;i<e.length&&0===e[i];)i++;if(i===e.length)return null;for(var r=i/t,o=i%t*32,n=e[i],h=0;0==(n<<31-h&4294967295);)h++;return o+=h,Int32Array.from([o,r])},t.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,i=e.length-1;i>=0&&0===e[i];)i--;if(i<0)return null;for(var r=Math.floor(i/t),o=32*Math.floor(i%t),n=e[i],h=31;n>>>h==0;)h--;return o+=h,Int32Array.from([o,r])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var i=e;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&Arrays_1.default.equals(this.bits,i.bits)},t.prototype.hashCode=function(){var t=this.width;return t=31*(t=31*(t=31*(t=31*t+this.width)+this.height)+this.rowSize)+Arrays_1.default.hashCode(this.bits)},t.prototype.toString=function(t,e,i){return void 0===t&&(t="X "),void 0===e&&(e="  "),void 0===i&&(i="\n"),this.buildToString(t,e,i)},t.prototype.buildToString=function(t,e,i){for(var r=new StringBuilder_1.default,o=0,n=this.height;o<n;o++){for(var h=0,s=this.width;h<s;h++)r.append(this.get(h,o)?t:e);r.append(i)}return r.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}();exports.default=BitMatrix;
//# sourceMappingURL=/sm/f3cf47e159d1f3fb62bdf692904056f77137141232bd01c4593b5cf29ba98e47.map