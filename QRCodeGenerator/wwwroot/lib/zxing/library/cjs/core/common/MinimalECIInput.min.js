/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/common/MinimalECIInput.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MinimalECIInput=void 0;var ECIEncoderSet_1=require("./ECIEncoderSet"),Integer_1=require("../util/Integer"),StringBuilder_1=require("../util/StringBuilder"),COST_PER_ECI=3,MinimalECIInput=function(){function e(e,t,r){this.fnc1=r;var n=new ECIEncoderSet_1.ECIEncoderSet(e,t,r);if(1===n.length())for(var i=0;i<this.bytes.length;i++){var o=e.charAt(i).charCodeAt(0);this.bytes[i]=o===r?1e3:o}else this.bytes=this.encodeMinimally(e,n,r)}return e.prototype.getFNC1Character=function(){return this.fnc1},e.prototype.length=function(){return this.bytes.length},e.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},e.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},e.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new StringBuilder_1.default,n=e;n<t;n++){if(this.isECI(n))throw new Error("value at "+n+" is not a character but an ECI");r.append(this.charAt(n))}return r.toString()},e.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},e.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return 1e3===this.bytes[e]},e.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},e.prototype.addEdge=function(e,t,r){(null==e[t][r.encoderIndex]||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},e.prototype.addEdges=function(e,t,r,n,i,o){var h=e.charAt(n).charCodeAt(0),s=0,a=t.length();t.getPriorityEncoderIndex()>=0&&(h===o||t.canEncode(h,t.getPriorityEncoderIndex()))&&(a=(s=t.getPriorityEncoderIndex())+1);for(var c=s;c<a;c++)(h===o||t.canEncode(h,c))&&this.addEdge(r,n+1,new InputEdge(h,t,c,i,o))},e.prototype.encodeMinimally=function(e,t,r){var n=e.length,i=new(InputEdge[n+1][t.length()]);this.addEdges(e,t,i,0,null,r);for(var o=1;o<=n;o++){for(var h=0;h<t.length();h++)null!=i[o][h]&&o<n&&this.addEdges(e,t,i,o,i[o][h],r);for(h=0;h<t.length();h++)i[o-1][h]=null}var s=-1,a=Integer_1.default.MAX_VALUE;for(h=0;h<t.length();h++)if(null!=i[n][h]){var c=i[n][h];c.cachedTotalSize<a&&(a=c.cachedTotalSize,s=h)}if(s<0)throw new Error('Failed to encode "'+e+'"');for(var u=[],d=i[n][s];null!=d;){if(d.isFNC1())u.unshift(1e3);else{var l=t.encode(d.c,d.encoderIndex);for(o=l.length-1;o>=0;o--)u.unshift(255&l[o])}(null===d.previous?0:d.previous.encoderIndex)!==d.encoderIndex&&u.unshift(256+t.getECIValue(d.encoderIndex)),d=d.previous}var f=[];for(o=0;o<f.length;o++)f[o]=u[o];return f},e}();exports.MinimalECIInput=MinimalECIInput;var InputEdge=function(){function e(e,t,r,n,i){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=n,this.fnc1=i,this.c=e===i?1e3:e;var o=this.isFNC1()?1:t.encode(e,r).length;(null===n?0:n.encoderIndex)!==r&&(o+=COST_PER_ECI),null!=n&&(o+=n.cachedTotalSize),this.cachedTotalSize=o}return e.prototype.isFNC1=function(){return 1e3===this.c},e}();
//# sourceMappingURL=/sm/727e6e3e6fafa063843fd0328d05cd081557f123c963f9e34b807660f01dc828.map