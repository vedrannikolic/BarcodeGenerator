/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/cjs/core/common/detector/WhiteRectangleDetector.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ResultPoint_1=require("../../ResultPoint"),MathUtils_1=require("./MathUtils"),NotFoundException_1=require("../../NotFoundException"),WhiteRectangleDetector=function(){function t(e,n,i,o){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==n&&(n=t.INIT_SIZE),null==i&&(i=e.getWidth()/2|0),null==o&&(o=e.getHeight()/2|0);var l=n/2|0;if(this.leftInit=i-l,this.rightInit=i+l,this.upInit=o-l,this.downInit=o+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new NotFoundException_1.default}return t.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,n=this.upInit,i=this.downInit,o=!1,l=!0,u=!1,r=!1,a=!1,h=!1,s=!1,f=this.width,d=this.height;l;){l=!1;for(var g=!0;(g||!r)&&e<f;)(g=this.containsBlackPoint(n,i,e,!1))?(e++,l=!0,r=!0):r||e++;if(e>=f){o=!0;break}for(var c=!0;(c||!a)&&i<d;)(c=this.containsBlackPoint(t,e,i,!0))?(i++,l=!0,a=!0):a||i++;if(i>=d){o=!0;break}for(var w=!0;(w||!h)&&t>=0;)(w=this.containsBlackPoint(n,i,t,!1))?(t--,l=!0,h=!0):h||t--;if(t<0){o=!0;break}for(var _=!0;(_||!s)&&n>=0;)(_=this.containsBlackPoint(t,e,n,!0))?(n--,l=!0,s=!0):s||n--;if(n<0){o=!0;break}l&&(u=!0)}if(!o&&u){for(var p=e-t,P=null,v=1;null===P&&v<p;v++)P=this.getBlackPointOnSegment(t,i-v,t+v,i);if(null==P)throw new NotFoundException_1.default;var I=null;for(v=1;null===I&&v<p;v++)I=this.getBlackPointOnSegment(t,n+v,t+v,n);if(null==I)throw new NotFoundException_1.default;var R=null;for(v=1;null===R&&v<p;v++)R=this.getBlackPointOnSegment(e,n+v,e-v,n);if(null==R)throw new NotFoundException_1.default;var k=null;for(v=1;null===k&&v<p;v++)k=this.getBlackPointOnSegment(e,i-v,e-v,i);if(null==k)throw new NotFoundException_1.default;return this.centerEdges(k,P,R,I)}throw new NotFoundException_1.default},t.prototype.getBlackPointOnSegment=function(t,e,n,i){for(var o=MathUtils_1.default.round(MathUtils_1.default.distance(t,e,n,i)),l=(n-t)/o,u=(i-e)/o,r=this.image,a=0;a<o;a++){var h=MathUtils_1.default.round(t+a*l),s=MathUtils_1.default.round(e+a*u);if(r.get(h,s))return new ResultPoint_1.default(h,s)}return null},t.prototype.centerEdges=function(e,n,i,o){var l=e.getX(),u=e.getY(),r=n.getX(),a=n.getY(),h=i.getX(),s=i.getY(),f=o.getX(),d=o.getY(),g=t.CORR;return l<this.width/2?[new ResultPoint_1.default(f-g,d+g),new ResultPoint_1.default(r+g,a+g),new ResultPoint_1.default(h-g,s-g),new ResultPoint_1.default(l+g,u-g)]:[new ResultPoint_1.default(f+g,d+g),new ResultPoint_1.default(r+g,a-g),new ResultPoint_1.default(h-g,s+g),new ResultPoint_1.default(l-g,u-g)]},t.prototype.containsBlackPoint=function(t,e,n,i){var o=this.image;if(i){for(var l=t;l<=e;l++)if(o.get(l,n))return!0}else for(var u=t;u<=e;u++)if(o.get(n,u))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}();exports.default=WhiteRectangleDetector;
//# sourceMappingURL=/sm/e7fd83c61c7780ca15198ed21573533398e82a9cfcf371d180c295af65f5d4aa.map