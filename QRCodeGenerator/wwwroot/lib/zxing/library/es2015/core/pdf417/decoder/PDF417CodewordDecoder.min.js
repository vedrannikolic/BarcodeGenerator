/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/es2015/core/pdf417/decoder/PDF417CodewordDecoder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import MathUtils from"../../common/detector/MathUtils";import PDF417Common from"../PDF417Common";import Float from"../../util/Float";export default class PDF417CodewordDecoder{static initialize(){for(let o=0;o<PDF417Common.SYMBOL_TABLE.length;o++){let e=PDF417Common.SYMBOL_TABLE[o],t=1&e;for(let r=0;r<PDF417Common.BARS_IN_MODULE;r++){let D=0;for(;(1&e)===t;)D+=1,e>>=1;t=1&e,PDF417CodewordDecoder.RATIOS_TABLE[o]||(PDF417CodewordDecoder.RATIOS_TABLE[o]=new Array(PDF417Common.BARS_IN_MODULE)),PDF417CodewordDecoder.RATIOS_TABLE[o][PDF417Common.BARS_IN_MODULE-r-1]=Math.fround(D/PDF417Common.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let e=PDF417CodewordDecoder.getDecodedCodewordValue(PDF417CodewordDecoder.sampleBitCounts(o));return-1!==e?e:PDF417CodewordDecoder.getClosestDecodedValue(o)}static sampleBitCounts(o){let e=MathUtils.sum(o),t=new Int32Array(PDF417Common.BARS_IN_MODULE),r=0,D=0;for(let d=0;d<PDF417Common.MODULES_IN_CODEWORD;d++){let l=e/(2*PDF417Common.MODULES_IN_CODEWORD)+d*e/PDF417Common.MODULES_IN_CODEWORD;D+o[r]<=l&&(D+=o[r],r++),t[r]++}return t}static getDecodedCodewordValue(o){let e=PDF417CodewordDecoder.getBitValue(o);return-1===PDF417Common.getCodeword(e)?-1:e}static getBitValue(o){let e=0;for(let t=0;t<o.length;t++)for(let r=0;r<o[t];r++)e=e<<1|(t%2==0?1:0);return Math.trunc(e)}static getClosestDecodedValue(o){let e=MathUtils.sum(o),t=new Array(PDF417Common.BARS_IN_MODULE);if(e>1)for(let r=0;r<t.length;r++)t[r]=Math.fround(o[r]/e);let r=Float.MAX_VALUE,D=-1;this.bSymbolTableReady||PDF417CodewordDecoder.initialize();for(let o=0;o<PDF417CodewordDecoder.RATIOS_TABLE.length;o++){let e=0,d=PDF417CodewordDecoder.RATIOS_TABLE[o];for(let o=0;o<PDF417Common.BARS_IN_MODULE;o++){let D=Math.fround(d[o]-t[o]);if(e+=Math.fround(D*D),e>=r)break}e<r&&(r=e,D=PDF417Common.SYMBOL_TABLE[o])}return D}}PDF417CodewordDecoder.bSymbolTableReady=!1,PDF417CodewordDecoder.RATIOS_TABLE=new Array(PDF417Common.SYMBOL_TABLE.length).map((o=>new Array(PDF417Common.BARS_IN_MODULE)));
//# sourceMappingURL=/sm/4ecad3d6f5a5bd68ec801910be03632b87d696bdca3f2e0d904cc0f9cbf2bebc.map