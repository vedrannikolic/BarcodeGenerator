/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/es2015/core/oned/AbstractUPCEANReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import OneDReader from"./OneDReader";import NotFoundException from"../NotFoundException";import FormatException from"../FormatException";export default class AbstractUPCEANReader extends OneDReader{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r,e=!1,a=0,A=Int32Array.from([0,0,0]);for(;!e;){A=Int32Array.from([0,0,0]),r=AbstractUPCEANReader.findGuardPattern(t,a,!1,this.START_END_PATTERN,A);let n=r[0];a=r[1];let o=n-(a-n);o>=0&&(e=t.isRange(o,n,!1))}return r}static checkChecksum(t){return AbstractUPCEANReader.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(0===r)return!1;let e=parseInt(t.charAt(r-1),10);return AbstractUPCEANReader.getStandardUPCEANChecksum(t.substring(0,r-1))===e}static getStandardUPCEANChecksum(t){let r=t.length,e=0;for(let a=r-1;a>=0;a-=2){let r=t.charAt(a).charCodeAt(0)-"0".charCodeAt(0);if(r<0||r>9)throw new FormatException;e+=r}e*=3;for(let a=r-2;a>=0;a-=2){let r=t.charAt(a).charCodeAt(0)-"0".charCodeAt(0);if(r<0||r>9)throw new FormatException;e+=r}return(1e3-e)%10}static decodeEnd(t,r){return AbstractUPCEANReader.findGuardPattern(t,r,!1,AbstractUPCEANReader.START_END_PATTERN,new Int32Array(AbstractUPCEANReader.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,e,a){return this.findGuardPattern(t,r,e,a,new Int32Array(a.length))}static findGuardPattern(t,r,e,a,A){let n=t.getSize(),o=0,c=r=e?t.getNextUnset(r):t.getNextSet(r),d=a.length,i=e;for(let e=r;e<n;e++)if(t.get(e)!==i)A[o]++;else{if(o===d-1){if(OneDReader.patternMatchVariance(A,a,AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE)<AbstractUPCEANReader.MAX_AVG_VARIANCE)return Int32Array.from([c,e]);c+=A[0]+A[1];let t=A.slice(2,A.length);for(let r=0;r<o-1;r++)A[r]=t[r];A[o-1]=0,A[o]=0,o--}else o++;A[o]=1,i=!i}throw new NotFoundException}static decodeDigit(t,r,e,a){this.recordPattern(t,e,r);let A=this.MAX_AVG_VARIANCE,n=-1,o=a.length;for(let t=0;t<o;t++){let e=a[t],o=OneDReader.patternMatchVariance(r,e,AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE);o<A&&(A=o,n=t)}if(n>=0)return n;throw new NotFoundException}}AbstractUPCEANReader.MAX_AVG_VARIANCE=.48,AbstractUPCEANReader.MAX_INDIVIDUAL_VARIANCE=.7,AbstractUPCEANReader.START_END_PATTERN=Int32Array.from([1,1,1]),AbstractUPCEANReader.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),AbstractUPCEANReader.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),AbstractUPCEANReader.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];
//# sourceMappingURL=/sm/39c8889600190487272191617d58b076aae61a35daea157ce9fe5140a64ec6d1.map