/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/es2015/core/oned/UPCEANExtension2Support.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import BarcodeFormat from"../BarcodeFormat";import AbstractUPCEANReader from"./AbstractUPCEANReader";import Result from"../Result";import ResultPoint from"../ResultPoint";import ResultMetadataType from"../ResultMetadataType";import NotFoundException from"../NotFoundException";export default class UPCEANExtension2Support{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,o){let r=this.decodeRowStringBuffer,n=this.decodeMiddle(e,o,r),d=r.toString(),i=UPCEANExtension2Support.parseExtensionString(d),a=[new ResultPoint((o[0]+o[1])/2,t),new ResultPoint(n,t)],s=new Result(d,null,0,a,BarcodeFormat.UPC_EAN_EXTENSION,(new Date).getTime());return null!=i&&s.putAllMetadata(i),s}decodeMiddle(t,e,o){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=t.getSize(),d=e[1],i=0;for(let e=0;e<2&&d<n;e++){let n=AbstractUPCEANReader.decodeDigit(t,r,d,AbstractUPCEANReader.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+n%10);for(let t of r)d+=t;n>=10&&(i|=1<<1-e),1!==e&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(2!==o.length)throw new NotFoundException;if(parseInt(o.toString())%4!==i)throw new NotFoundException;return d}static parseExtensionString(t){return 2!==t.length?null:new Map([[ResultMetadataType.ISSUE_NUMBER,parseInt(t)]])}}
//# sourceMappingURL=/sm/239be4a4a60143b6841ae7107f64084fe84e3a1b3f10b803d1636333ad3134c8.map