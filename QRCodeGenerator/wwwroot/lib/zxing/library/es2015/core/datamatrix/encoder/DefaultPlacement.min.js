/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/es2015/core/datamatrix/encoder/DefaultPlacement.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Arrays from"../../util/Arrays";class DefaultPlacement{constructor(s,t,i){this.codewords=s,this.numcols=t,this.numrows=i,this.bits=new Uint8Array(t*i),Arrays.fill(this.bits,2)}getNumrows(){return this.numrows}getNumcols(){return this.numcols}getBits(){return this.bits}getBit(s,t){return 1===this.bits[t*this.numcols+s]}setBit(s,t,i){this.bits[t*this.numcols+s]=i?1:0}noBit(s,t){return 2===this.bits[t*this.numcols+s]}place(){let s=0,t=4,i=0;do{t===this.numrows&&0===i&&this.corner1(s++),t===this.numrows-2&&0===i&&this.numcols%4!=0&&this.corner2(s++),t===this.numrows-2&&0===i&&this.numcols%8==4&&this.corner3(s++),t===this.numrows+4&&2===i&&this.numcols%8==0&&this.corner4(s++);do{t<this.numrows&&i>=0&&this.noBit(i,t)&&this.utah(t,i,s++),t-=2,i+=2}while(t>=0&&i<this.numcols);t++,i+=3;do{t>=0&&i<this.numcols&&this.noBit(i,t)&&this.utah(t,i,s++),t+=2,i-=2}while(t<this.numrows&&i>=0);t+=3,i++}while(t<this.numrows||i<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))}module(s,t,i,o){s<0&&(s+=this.numrows,t+=4-(this.numrows+4)%8),t<0&&(t+=this.numcols,s+=4-(this.numcols+4)%8);let h=this.codewords.charCodeAt(i);h&=1<<8-o,this.setBit(t,s,0!==h)}utah(s,t,i){this.module(s-2,t-2,i,1),this.module(s-2,t-1,i,2),this.module(s-1,t-2,i,3),this.module(s-1,t-1,i,4),this.module(s-1,t,i,5),this.module(s,t-2,i,6),this.module(s,t-1,i,7),this.module(s,t,i,8)}corner1(s){this.module(this.numrows-1,0,s,1),this.module(this.numrows-1,1,s,2),this.module(this.numrows-1,2,s,3),this.module(0,this.numcols-2,s,4),this.module(0,this.numcols-1,s,5),this.module(1,this.numcols-1,s,6),this.module(2,this.numcols-1,s,7),this.module(3,this.numcols-1,s,8)}corner2(s){this.module(this.numrows-3,0,s,1),this.module(this.numrows-2,0,s,2),this.module(this.numrows-1,0,s,3),this.module(0,this.numcols-4,s,4),this.module(0,this.numcols-3,s,5),this.module(0,this.numcols-2,s,6),this.module(0,this.numcols-1,s,7),this.module(1,this.numcols-1,s,8)}corner3(s){this.module(this.numrows-3,0,s,1),this.module(this.numrows-2,0,s,2),this.module(this.numrows-1,0,s,3),this.module(0,this.numcols-2,s,4),this.module(0,this.numcols-1,s,5),this.module(1,this.numcols-1,s,6),this.module(2,this.numcols-1,s,7),this.module(3,this.numcols-1,s,8)}corner4(s){this.module(this.numrows-1,0,s,1),this.module(this.numrows-1,this.numcols-1,s,2),this.module(0,this.numcols-3,s,3),this.module(0,this.numcols-2,s,4),this.module(0,this.numcols-1,s,5),this.module(1,this.numcols-3,s,6),this.module(1,this.numcols-2,s,7),this.module(1,this.numcols-1,s,8)}}export default DefaultPlacement;
//# sourceMappingURL=/sm/f974c8e6914682f2e48b5ea596465755000d239142c618355ddc84fed7e4b481.map