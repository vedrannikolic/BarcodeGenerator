/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/es2015/core/datamatrix/DataMatrixReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import BarcodeFormat from"../BarcodeFormat";import BitMatrix from"../common/BitMatrix";import DecodeHintType from"../DecodeHintType";import NotFoundException from"../NotFoundException";import Result from"../Result";import ResultMetadataType from"../ResultMetadataType";import System from"../util/System";import Decoder from"./decoder/Decoder";import Detector from"./detector/Detector";export default class DataMatrixReader{constructor(){this.decoder=new Decoder}decode(t,e=null){let o,r;if(null!=e&&e.has(DecodeHintType.PURE_BARCODE)){const e=DataMatrixReader.extractPureBits(t.getBlackMatrix());o=this.decoder.decode(e),r=DataMatrixReader.NO_POINTS}else{const e=new Detector(t.getBlackMatrix()).detect();o=this.decoder.decode(e.getBits()),r=e.getPoints()}const a=o.getRawBytes(),i=new Result(o.getText(),a,8*a.length,r,BarcodeFormat.DATA_MATRIX,System.currentTimeMillis()),n=o.getByteSegments();null!=n&&i.putMetadata(ResultMetadataType.BYTE_SEGMENTS,n);const c=o.getECLevel();return null!=c&&i.putMetadata(ResultMetadataType.ERROR_CORRECTION_LEVEL,c),i}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(null==e||null==o)throw new NotFoundException;const r=this.moduleSize(e,t);let a=e[1];const i=o[1];let n=e[0];const c=(o[0]-n+1)/r,d=(i-a+1)/r;if(c<=0||d<=0)throw new NotFoundException;const s=r/2;a+=s,n+=s;const l=new BitMatrix(c,d);for(let e=0;e<d;e++){const o=a+e*r;for(let a=0;a<c;a++)t.get(n+a*r,o)&&l.set(a,e)}return l}static moduleSize(t,e){const o=e.getWidth();let r=t[0];const a=t[1];for(;r<o&&e.get(r,a);)r++;if(r===o)throw new NotFoundException;const i=r-t[0];if(0===i)throw new NotFoundException;return i}}DataMatrixReader.NO_POINTS=[];
//# sourceMappingURL=/sm/8658a3daa3d2ded56a7f974d68c6cad9772be337f031bf1dc8b4fcf329a1d393.map