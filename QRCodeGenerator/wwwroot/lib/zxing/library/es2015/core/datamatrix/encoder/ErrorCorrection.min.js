/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/es2015/core/datamatrix/encoder/ErrorCorrection.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import StringBuilder from"../../util/StringBuilder";import{ALOG,FACTORS,FACTOR_SETS,LOG}from"./constants";class ErrorCorrection{static encodeECC200(t,e){if(t.length!==e.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");const r=new StringBuilder;r.append(t);const o=e.getInterleavedBlockCount();if(1===o){const o=this.createECCBlock(t,e.getErrorCodewords());r.append(o)}else{const n=[],a=[];for(let t=0;t<o;t++)n[t]=e.getDataLengthForInterleavedBlock(t+1),a[t]=e.getErrorLengthForInterleavedBlock(t+1);for(let n=0;n<o;n++){const c=new StringBuilder;for(let r=n;r<e.getDataCapacity();r+=o)c.append(t.charAt(r));const l=this.createECCBlock(c.toString(),a[n]);let i=0;for(let t=n;t<a[n]*o;t+=o)r.setCharAt(e.getDataCapacity()+t,l.charAt(i++))}}return r.toString()}static createECCBlock(t,e){let r=-1;for(let t=0;t<FACTOR_SETS.length;t++)if(FACTOR_SETS[t]===e){r=t;break}if(r<0)throw new Error("Illegal number of error correction codewords specified: "+e);const o=FACTORS[r],n=[];for(let t=0;t<e;t++)n[t]=0;for(let r=0;r<t.length;r++){let a=n[e-1]^t.charAt(r).charCodeAt(0);for(let t=e-1;t>0;t--)0!==a&&0!==o[t]?n[t]=n[t-1]^ALOG[(LOG[a]+LOG[o[t]])%255]:n[t]=n[t-1];0!==a&&0!==o[0]?n[0]=ALOG[(LOG[a]+LOG[o[0]])%255]:n[0]=0}const a=[];for(let t=0;t<e;t++)a[t]=n[e-t-1];return a.map((t=>String.fromCharCode(t))).join("")}}export default ErrorCorrection;
//# sourceMappingURL=/sm/e0a3f9635b8dd876e79711800ac1595b7ee151984e2b14e62b8c48593b7600db.map