/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/browser/HTMLCanvasElementLuminanceSource.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();import InvertedLuminanceSource from"../core/InvertedLuminanceSource";import LuminanceSource from"../core/LuminanceSource";import IllegalArgumentException from"../core/IllegalArgumentException";var HTMLCanvasElementLuminanceSource=function(t){function e(n){var r=t.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(n),r}return __extends(e,t),e.makeBufferFromCanvasImageData=function(t){var n=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(n.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,n,r){var a=new Uint8ClampedArray(n*r);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var o=0,i=0,s=t.length;o<s;o+=4,i++){var u=void 0;if(0===t[o+3])u=255;else u=306*t[o]+601*t[o+1]+117*t[o+2]+512>>10;a[i]=u}else{o=0,i=0;for(var c=t.length;o<c;o+=4,i++){u=void 0;if(0===t[o+3])u=255;else u=306*t[o]+601*t[o+1]+117*t[o+2]+512>>10;a[i]=255-u}}return a},e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new IllegalArgumentException("Requested row is outside the image: "+t);var n=this.getWidth(),r=t*n;return null===e?e=this.buffer.slice(r,r+n):(e.length<n&&(e=new Uint8ClampedArray(n)),e.set(this.buffer.slice(r,r+n))),e},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(e,n,r,a){return t.prototype.crop.call(this,e,n,r,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),r=n.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,i=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*i),u=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*i);return n.width=s,n.height=u,r.translate(s/2,u/2),r.rotate(a),r.drawImage(this.canvas,o/-2,i/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new InvertedLuminanceSource(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(LuminanceSource);export{HTMLCanvasElementLuminanceSource};
//# sourceMappingURL=/sm/15dd56b1f0dbb25d04b505c566b26a15333559f1eb7505aecff3eaf12b685f78.map