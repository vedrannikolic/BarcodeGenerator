/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/oned/Code128Reader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var r=function(t,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var o in t)t.hasOwnProperty(o)&&(r[o]=t[o])},r(t,o)};return function(t,o){function a(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)}}();import BarcodeFormat from"../BarcodeFormat";import ChecksumException from"../ChecksumException";import DecodeHintType from"../DecodeHintType";import FormatException from"../FormatException";import NotFoundException from"../NotFoundException";import Result from"../Result";import ResultPoint from"../ResultPoint";import OneDReader from"./OneDReader";var Code128Reader=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.findStartPattern=function(r){for(var o=r.getSize(),a=r.getNextSet(0),n=0,e=Int32Array.from([0,0,0,0,0,0]),A=a,f=!1,C=a;C<o;C++)if(r.get(C)!==f)e[n]++;else{if(5===n){for(var _=t.MAX_AVG_VARIANCE,m=-1,I=t.CODE_START_A;I<=t.CODE_START_C;I++){var y=OneDReader.patternMatchVariance(e,t.CODE_PATTERNS[I],t.MAX_INDIVIDUAL_VARIANCE);y<_&&(_=y,m=I)}if(m>=0&&r.isRange(Math.max(0,A-(C-A)/2),A,!1))return Int32Array.from([A,C,m]);A+=e[0]+e[1],(e=e.slice(2,e.length))[n-1]=0,e[n]=0,n--}else n++;e[n]=1,f=!f}throw new NotFoundException},t.decodeCode=function(r,o,a){OneDReader.recordPattern(r,a,o);for(var n=t.MAX_AVG_VARIANCE,e=-1,A=0;A<t.CODE_PATTERNS.length;A++){var f=t.CODE_PATTERNS[A],C=this.patternMatchVariance(o,f,t.MAX_INDIVIDUAL_VARIANCE);C<n&&(n=C,e=A)}if(e>=0)return e;throw new NotFoundException},t.prototype.decodeRow=function(r,o,a){var n,e=a&&!0===a.get(DecodeHintType.ASSUME_GS1),A=t.findStartPattern(o),f=A[2],C=0,_=new Uint8Array(20);switch(_[C++]=f,f){case t.CODE_START_A:n=t.CODE_CODE_A;break;case t.CODE_START_B:n=t.CODE_CODE_B;break;case t.CODE_START_C:n=t.CODE_CODE_C;break;default:throw new FormatException}for(var m=!1,I=!1,y="",E=A[0],O=A[1],D=Int32Array.from([0,0,0,0,0,0]),c=0,i=0,s=f,d=0,h=!0,T=!1,u=!1;!m;){var S=I;switch(I=!1,c=i,i=t.decodeCode(o,D,O),_[C++]=i,i!==t.CODE_STOP&&(h=!0),i!==t.CODE_STOP&&(s+=++d*i),E=O,O+=D.reduce((function(r,t){return r+t}),0),i){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new FormatException}switch(n){case t.CODE_CODE_A:if(i<64)y+=u===T?String.fromCharCode(" ".charCodeAt(0)+i):String.fromCharCode(" ".charCodeAt(0)+i+128),u=!1;else if(i<96)y+=u===T?String.fromCharCode(i-64):String.fromCharCode(i+64),u=!1;else switch(i!==t.CODE_STOP&&(h=!1),i){case t.CODE_FNC_1:e&&(0===y.length?y+="]C1":y+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!T&&u?(T=!0,u=!1):T&&u?(T=!1,u=!1):u=!0;break;case t.CODE_SHIFT:I=!0,n=t.CODE_CODE_B;break;case t.CODE_CODE_B:n=t.CODE_CODE_B;break;case t.CODE_CODE_C:n=t.CODE_CODE_C;break;case t.CODE_STOP:m=!0}break;case t.CODE_CODE_B:if(i<96)y+=u===T?String.fromCharCode(" ".charCodeAt(0)+i):String.fromCharCode(" ".charCodeAt(0)+i+128),u=!1;else switch(i!==t.CODE_STOP&&(h=!1),i){case t.CODE_FNC_1:e&&(0===y.length?y+="]C1":y+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!T&&u?(T=!0,u=!1):T&&u?(T=!1,u=!1):u=!0;break;case t.CODE_SHIFT:I=!0,n=t.CODE_CODE_A;break;case t.CODE_CODE_A:n=t.CODE_CODE_A;break;case t.CODE_CODE_C:n=t.CODE_CODE_C;break;case t.CODE_STOP:m=!0}break;case t.CODE_CODE_C:if(i<100)i<10&&(y+="0"),y+=i;else switch(i!==t.CODE_STOP&&(h=!1),i){case t.CODE_FNC_1:e&&(0===y.length?y+="]C1":y+=String.fromCharCode(29));break;case t.CODE_CODE_A:n=t.CODE_CODE_A;break;case t.CODE_CODE_B:n=t.CODE_CODE_B;break;case t.CODE_STOP:m=!0}}S&&(n=n===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var p=O-E;if(O=o.getNextUnset(O),!o.isRange(O,Math.min(o.getSize(),O+(O-E)/2),!1))throw new NotFoundException;if((s-=d*c)%103!==c)throw new ChecksumException;var R=y.length;if(0===R)throw new NotFoundException;R>0&&h&&(y=n===t.CODE_CODE_C?y.substring(0,R-2):y.substring(0,R-1));for(var N=(A[1]+A[0])/2,F=E+p/2,w=_.length,l=new Uint8Array(w),g=0;g<w;g++)l[g]=_[g];var b=[new ResultPoint(N,r),new ResultPoint(F,r)];return new Result(y,l,0,b,BarcodeFormat.CODE_128,(new Date).getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(OneDReader);export default Code128Reader;
//# sourceMappingURL=/sm/5fa830df8de6085745e05476de6cf60c7ebc6d37cda848466a93b89aa0ba76b8.map