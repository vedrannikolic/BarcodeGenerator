/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/oned/Code93Reader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};import BarcodeFormat from"../BarcodeFormat";import ChecksumException from"../ChecksumException";import FormatException from"../FormatException";import NotFoundException from"../NotFoundException";import OneDReader from"./OneDReader";import Result from"../Result";import ResultPoint from"../ResultPoint";var Code93Reader=function(e){function t(){var t=e.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return __extends(t,e),t.prototype.decodeRow=function(e,r,o){var n,i,a,c,s,h,d=this.findAsteriskPattern(r),f=r.getNextSet(d[1]),u=r.getSize(),l=this.counters;l.fill(0),this.decodeRowResult="";do{t.recordPattern(r,f,l);var p=this.toPattern(l);if(p<0)throw new NotFoundException;s=this.patternToChar(p),this.decodeRowResult+=s,h=f;try{for(var R=(n=void 0,__values(l)),C=R.next();!C.done;C=R.next()){f+=C.value}}catch(e){n={error:e}}finally{try{C&&!C.done&&(i=R.return)&&i.call(R)}finally{if(n)throw n.error}}f=r.getNextSet(f)}while("*"!==s);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var m=__values(l),A=m.next();!A.done;A=m.next()){w+=A.value}}catch(e){a={error:e}}finally{try{A&&!A.done&&(c=m.return)&&c.call(m)}finally{if(a)throw a.error}}if(f===u||!r.get(f))throw new NotFoundException;if(this.decodeRowResult.length<2)throw new NotFoundException;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var E=this.decodeExtended(this.decodeRowResult),v=(d[1]+d[0])/2,_=h+w/2;return new Result(E,null,0,[new ResultPoint(v,e),new ResultPoint(_,e)],BarcodeFormat.CODE_93,(new Date).getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),o=e.getNextSet(0);this.counters.fill(0);for(var n=this.counters,i=o,a=!1,c=n.length,s=0,h=o;h<r;h++)if(e.get(h)!==a)n[s]++;else{if(s===c-1){if(this.toPattern(n)===t.ASTERISK_ENCODING)return new Int32Array([i,h]);i+=n[0]+n[1],n.copyWithin(0,2,2+s-1),n[s-1]=0,n[s]=0,s--}else s++;n[s]=1,a=!a}throw new NotFoundException},t.prototype.toPattern=function(e){var t,r,o=0;try{for(var n=__values(e),i=n.next();!i.done;i=n.next()){o+=i.value}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}for(var a=0,c=e.length,s=0;s<c;s++){var h=Math.round(9*e[s]/o);if(h<1||h>4)return-1;if(0==(1&s))for(var d=0;d<h;d++)a=a<<1|1;else a<<=h}return a},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new NotFoundException},t.prototype.decodeExtended=function(e){for(var t=e.length,r="",o=0;o<t;o++){var n=e.charAt(o);if(n>="a"&&n<="d"){if(o>=t-1)throw new FormatException;var i=e.charAt(o+1),a="\0";switch(n){case"d":if(!(i>="A"&&i<="Z"))throw new FormatException;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"a":if(!(i>="A"&&i<="Z"))throw new FormatException;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"b":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if(!(i>="X"&&i<="Z"))throw new FormatException;a=String.fromCharCode(127)}break;case"c":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new FormatException;a=":"}}r+=a,o++}else r+=n}return r},t.prototype.checkChecksums=function(e){var t=e.length;this.checkOneChecksum(e,t-2,20),this.checkOneChecksum(e,t-1,15)},t.prototype.checkOneChecksum=function(e,r,o){for(var n=1,i=0,a=r-1;a>=0;a--)i+=n*t.ALPHABET_STRING.indexOf(e.charAt(a)),++n>o&&(n=1);if(e.charAt(r)!==t.ALPHABET_STRING[i%47])throw new ChecksumException},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(OneDReader);export default Code93Reader;
//# sourceMappingURL=/sm/9a9f217b8ec06407d495b377eab92adc204968760c7fc57f72769563c8312cb5.map