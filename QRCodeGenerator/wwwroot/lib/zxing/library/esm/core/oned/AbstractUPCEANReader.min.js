/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/oned/AbstractUPCEANReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n])},r(t,n)};return function(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();import OneDReader from"./OneDReader";import NotFoundException from"../NotFoundException";import FormatException from"../FormatException";var AbstractUPCEANReader=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return __extends(t,r),t.findStartGuardPattern=function(r){for(var n,e=!1,o=0,a=Int32Array.from([0,0,0]);!e;){a=Int32Array.from([0,0,0]);var A=(n=t.findGuardPattern(r,o,!1,this.START_END_PATTERN,a))[0],i=A-((o=n[1])-A);i>=0&&(e=r.isRange(i,A,!1))}return n},t.checkChecksum=function(r){return t.checkStandardUPCEANChecksum(r)},t.checkStandardUPCEANChecksum=function(r){var n=r.length;if(0===n)return!1;var e=parseInt(r.charAt(n-1),10);return t.getStandardUPCEANChecksum(r.substring(0,n-1))===e},t.getStandardUPCEANChecksum=function(r){for(var t=r.length,n=0,e=t-1;e>=0;e-=2){if((o=r.charAt(e).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new FormatException;n+=o}n*=3;for(e=t-2;e>=0;e-=2){var o;if((o=r.charAt(e).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new FormatException;n+=o}return(1e3-n)%10},t.decodeEnd=function(r,n){return t.findGuardPattern(r,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(r,t,n,e){return this.findGuardPattern(r,t,n,e,new Int32Array(e.length))},t.findGuardPattern=function(r,n,e,o,a){for(var A=r.getSize(),i=0,f=n=e?r.getNextUnset(n):r.getNextSet(n),c=o.length,u=e,d=n;d<A;d++)if(r.get(d)!==u)a[i]++;else{if(i===c-1){if(OneDReader.patternMatchVariance(a,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([f,d]);f+=a[0]+a[1];for(var h=a.slice(2,a.length),_=0;_<i-1;_++)a[_]=h[_];a[i-1]=0,a[i]=0,i--}else i++;a[i]=1,u=!u}throw new NotFoundException},t.decodeDigit=function(r,n,e,o){this.recordPattern(r,e,n);for(var a=this.MAX_AVG_VARIANCE,A=-1,i=o.length,f=0;f<i;f++){var c=o[f],u=OneDReader.patternMatchVariance(n,c,t.MAX_INDIVIDUAL_VARIANCE);u<a&&(a=u,A=f)}if(A>=0)return A;throw new NotFoundException},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(OneDReader);export default AbstractUPCEANReader;
//# sourceMappingURL=/sm/710df4ea5045fb5151a831b0dbecd623d80b4573105a76d2e0f7898adc0c1354.map