/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/oned/UPCEANReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();import BarcodeFormat from"../BarcodeFormat";import DecodeHintType from"../DecodeHintType";import Result from"../Result";import ResultMetadataType from"../ResultMetadataType";import ResultPoint from"../ResultPoint";import UPCEANExtensionSupport from"./UPCEANExtensionSupport";import AbstractUPCEANReader from"./AbstractUPCEANReader";import NotFoundException from"../NotFoundException";import FormatException from"../FormatException";import ChecksumException from"../ChecksumException";var UPCEANReader=function(t){function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map((function(t){return Int32Array.from(t)}));for(var o=10;o<20;o++){for(var n=e.L_PATTERNS[o-10],a=new Int32Array(n.length),i=0;i<n.length;i++)a[i]=n[n.length-i-1];e.L_AND_G_PATTERNS[o]=a}return r}return __extends(e,t),e.prototype.decodeRow=function(t,r,o){var n=e.findStartGuardPattern(r),a=null==o?null:o.get(DecodeHintType.NEED_RESULT_POINT_CALLBACK);if(null!=a){var i=new ResultPoint((n[0]+n[1])/2,t);a.foundPossibleResultPoint(i)}var u=this.decodeMiddle(r,n,this.decodeRowStringBuffer),c=u.rowOffset,d=u.resultString;if(null!=a){var s=new ResultPoint(c,t);a.foundPossibleResultPoint(s)}var l=e.decodeEnd(r,c);if(null!=a){var f=new ResultPoint((l[0]+l[1])/2,t);a.foundPossibleResultPoint(f)}var p=l[1],E=p+(p-l[0]);if(E>=r.getSize()||!r.isRange(p,E,!1))throw new NotFoundException;var h=d.toString();if(h.length<8)throw new FormatException;if(!e.checkChecksum(h))throw new ChecksumException;var A=(n[1]+n[0])/2,m=(l[1]+l[0])/2,P=this.getBarcodeFormat(),R=[new ResultPoint(A,t),new ResultPoint(m,t)],N=new Result(h,null,0,R,P,(new Date).getTime()),_=0;try{var T=UPCEANExtensionSupport.decodeRow(t,r,l[1]);N.putMetadata(ResultMetadataType.UPC_EAN_EXTENSION,T.getText()),N.putAllMetadata(T.getResultMetadata()),N.addResultPoints(T.getResultPoints()),_=T.getText().length}catch(t){}var C=null==o?null:o.get(DecodeHintType.ALLOWED_EAN_EXTENSIONS);if(null!=C){var w=!1;for(var g in C)if(_.toString()===g){w=!0;break}if(!w)throw new NotFoundException}return P===BarcodeFormat.EAN_13||BarcodeFormat.UPC_A,N},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(0===r)return!1;var o=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===o},e.getStandardUPCEANChecksum=function(t){for(var e=t.length,r=0,o=e-1;o>=0;o-=2){if((n=t.charAt(o).charCodeAt(0)-"0".charCodeAt(0))<0||n>9)throw new FormatException;r+=n}r*=3;for(o=e-2;o>=0;o-=2){var n;if((n=t.charAt(o).charCodeAt(0)-"0".charCodeAt(0))<0||n>9)throw new FormatException;r+=n}return(1e3-r)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(AbstractUPCEANReader);export default UPCEANReader;
//# sourceMappingURL=/sm/e66db904df6f820207e644b064beb2f4b4b55cdd010ad1d7184eee22fbaab541.map