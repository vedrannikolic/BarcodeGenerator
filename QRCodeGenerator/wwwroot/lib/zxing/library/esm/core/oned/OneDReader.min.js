/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/oned/OneDReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import BitArray from"../common/BitArray";import DecodeHintType from"../DecodeHintType";import ResultMetadataType from"../ResultMetadataType";import ResultPoint from"../ResultPoint";import NotFoundException from"../NotFoundException";var OneDReader=function(){function t(){}return t.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch(d){if(e&&!0===e.get(DecodeHintType.TRY_HARDER)&&t.isRotateSupported()){var r=t.rotateCounterClockwise(),o=this.doDecode(r,e),n=o.getResultMetadata(),a=270;null!==n&&!0===n.get(ResultMetadataType.ORIENTATION)&&(a+=n.get(ResultMetadataType.ORIENTATION)%360),o.putMetadata(ResultMetadataType.ORIENTATION,a);var i=o.getResultPoints();if(null!==i)for(var u=r.getHeight(),c=0;c<i.length;c++)i[c]=new ResultPoint(u-i[c].getY()-1,i[c].getX());return o}throw new NotFoundException}},t.prototype.reset=function(){},t.prototype.doDecode=function(t,e){var r,o=t.getWidth(),n=t.getHeight(),a=new BitArray(o),i=e&&!0===e.get(DecodeHintType.TRY_HARDER),u=Math.max(1,n>>(i?8:5));r=i?n:15;for(var c=Math.trunc(n/2),d=0;d<r;d++){var f=Math.trunc((d+1)/2),p=c+u*(0==(1&d)?f:-f);if(p<0||p>=n)break;try{a=t.getBlackRow(p,a)}catch(t){continue}for(var R=function(t){if(1===t&&(a.reverse(),e&&!0===e.get(DecodeHintType.NEED_RESULT_POINT_CALLBACK))){var r=new Map;e.forEach((function(t,e){return r.set(e,t)})),r.delete(DecodeHintType.NEED_RESULT_POINT_CALLBACK),e=r}try{var n=l.decodeRow(p,a,e);if(1===t){n.putMetadata(ResultMetadataType.ORIENTATION,180);var i=n.getResultPoints();null!==i&&(i[0]=new ResultPoint(o-i[0].getX()-1,i[0].getY()),i[1]=new ResultPoint(o-i[1].getX()-1,i[1].getY()))}return{value:n}}catch(t){}},l=this,T=0;T<2;T++){var g=R(T);if("object"==typeof g)return g.value}}throw new NotFoundException},t.recordPattern=function(t,e,r){for(var o=r.length,n=0;n<o;n++)r[n]=0;var a=t.getSize();if(e>=a)throw new NotFoundException;for(var i=!t.get(e),u=0,c=e;c<a;){if(t.get(c)!==i)r[u]++;else{if(++u===o)break;r[u]=1,i=!i}c++}if(u!==o&&(u!==o-1||c!==a))throw new NotFoundException},t.recordPatternInReverse=function(e,r,o){for(var n=o.length,a=e.get(r);r>0&&n>=0;)e.get(--r)!==a&&(n--,a=!a);if(n>=0)throw new NotFoundException;t.recordPattern(e,r+1,o)},t.patternMatchVariance=function(t,e,r){for(var o=t.length,n=0,a=0,i=0;i<o;i++)n+=t[i],a+=e[i];if(n<a)return Number.POSITIVE_INFINITY;var u=n/a;r*=u;for(var c=0,d=0;d<o;d++){var f=t[d],p=e[d]*u,R=f>p?f-p:p-f;if(R>r)return Number.POSITIVE_INFINITY;c+=R}return c/n},t}();export default OneDReader;
//# sourceMappingURL=/sm/1dd0c3de5de0a8f46b3d204be9a6ef5de4e84c4333fc9ac0ebafe98e0da02159.map