/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/oned/Code39Reader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};import BarcodeFormat from"../BarcodeFormat";import ChecksumException from"../ChecksumException";import FormatException from"../FormatException";import NotFoundException from"../NotFoundException";import OneDReader from"./OneDReader";import Result from"../Result";import ResultPoint from"../ResultPoint";var Code39Reader=function(e){function t(t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var o=e.call(this)||this;return o.usingCheckDigit=t,o.extendedMode=r,o.decodeRowResult="",o.counters=new Int32Array(9),o}return __extends(t,e),t.prototype.decodeRow=function(e,r,o){var n,i,a,d,c=this.counters;c.fill(0),this.decodeRowResult="";var s,f,l=t.findAsteriskPattern(r,c),u=r.getNextSet(l[1]),h=r.getSize();do{t.recordPattern(r,u,c);var R=t.toNarrowWidePattern(c);if(R<0)throw new NotFoundException;s=t.patternToChar(R),this.decodeRowResult+=s,f=u;try{for(var w=(n=void 0,__values(c)),C=w.next();!C.done;C=w.next()){u+=C.value}}catch(e){n={error:e}}finally{try{C&&!C.done&&(i=w.return)&&i.call(w)}finally{if(n)throw n.error}}u=r.getNextSet(u)}while("*"!==s);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var p,m=0;try{for(var A=__values(c),v=A.next();!v.done;v=A.next()){m+=v.value}}catch(e){a={error:e}}finally{try{v&&!v.done&&(d=A.return)&&d.call(A)}finally{if(a)throw a.error}}if(u!==h&&2*(u-f-m)<m)throw new NotFoundException;if(this.usingCheckDigit){for(var E=this.decodeRowResult.length-1,x=0,_=0;_<E;_++)x+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(_));if(this.decodeRowResult.charAt(E)!==t.ALPHABET_STRING.charAt(x%43))throw new ChecksumException;this.decodeRowResult=this.decodeRowResult.substring(0,E)}if(0===this.decodeRowResult.length)throw new NotFoundException;p=this.extendedMode?t.decodeExtended(this.decodeRowResult):this.decodeRowResult;var g=(l[1]+l[0])/2,N=f+m/2;return new Result(p,null,0,[new ResultPoint(g,e),new ResultPoint(N,e)],BarcodeFormat.CODE_39,(new Date).getTime())},t.findAsteriskPattern=function(e,r){for(var o=e.getSize(),n=e.getNextSet(0),i=0,a=n,d=!1,c=r.length,s=n;s<o;s++)if(e.get(s)!==d)r[i]++;else{if(i===c-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,a-Math.floor((s-a)/2)),a,!1))return[a,s];a+=r[0]+r[1],r.copyWithin(0,2,2+i-1),r[i-1]=0,r[i]=0,i--}else i++;r[i]=1,d=!d}throw new NotFoundException},t.toNarrowWidePattern=function(e){var t,r,o,n=e.length,i=0;do{var a=2147483647;try{for(var d=(t=void 0,__values(e)),c=d.next();!c.done;c=d.next()){(u=c.value)<a&&u>i&&(a=u)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}i=a,o=0;for(var s=0,f=0,l=0;l<n;l++){(u=e[l])>i&&(f|=1<<n-1-l,o++,s+=u)}if(3===o){for(l=0;l<n&&o>0;l++){var u;if((u=e[l])>i&&(o--,2*u>=s))return-1}return f}}while(o>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new NotFoundException},t.decodeExtended=function(e){for(var t=e.length,r="",o=0;o<t;o++){var n=e.charAt(o);if("+"===n||"$"===n||"%"===n||"/"===n){var i=e.charAt(o+1),a="\0";switch(n){case"+":if(!(i>="A"&&i<="Z"))throw new FormatException;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new FormatException;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new FormatException;a=""}break;case"/":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new FormatException;a=":"}}r+=a,o++}else r+=n}return r},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(OneDReader);export default Code39Reader;
//# sourceMappingURL=/sm/16a1f1b1b8f7a135910316a496d0e3ebdd07176060c361c5444ce7f0faff92d7.map