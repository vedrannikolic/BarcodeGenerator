/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/datamatrix/DataMatrixWriter.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import BarcodeFormat from"../BarcodeFormat";import BitMatrix from"../common/BitMatrix";import EncodeHintType from"../EncodeHintType";import ByteMatrix from"../qrcode/encoder/ByteMatrix";import Charset from"../util/Charset";import{DefaultPlacement,ErrorCorrection,HighLevelEncoder,MinimalEncoder,SymbolInfo}from"./encoder";var DataMatrixWriter=function(){function t(){}return t.prototype.encode=function(t,e,o,r,n){if(void 0===n&&(n=null),""===t.trim())throw new Error("Found empty contents");if(e!==BarcodeFormat.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+e);if(o<0||r<0)throw new Error("Requested dimensions can't be negative: "+o+"x"+r);var i,a=0,l=null,c=null;if(null!=n){var d=n.get(EncodeHintType.DATA_MATRIX_SHAPE);null!=d&&(a=d);var m=n.get(EncodeHintType.MIN_SIZE);null!=m&&(l=m);var g=n.get(EncodeHintType.MAX_SIZE);null!=g&&(c=g)}if(null!=n&&n.has(EncodeHintType.DATA_MATRIX_COMPACT)&&Boolean(n.get(EncodeHintType.DATA_MATRIX_COMPACT).toString())){var h=n.has(EncodeHintType.GS1_FORMAT)&&Boolean(n.get(EncodeHintType.GS1_FORMAT).toString()),y=null;n.has(EncodeHintType.CHARACTER_SET)&&(y=Charset.forName(n.get(EncodeHintType.CHARACTER_SET).toString())),i=MinimalEncoder.encodeHighLevel(t,y,h?29:-1,a)}else{var T=null!=n&&n.has(EncodeHintType.FORCE_C40)&&Boolean(n.get(EncodeHintType.FORCE_C40).toString());i=HighLevelEncoder.encodeHighLevel(t,a,l,c,T)}var E=SymbolInfo.lookup(i.length,a,l,c,!0),f=ErrorCorrection.encodeECC200(i,E),p=new DefaultPlacement(f,E.getSymbolDataWidth(),E.getSymbolDataHeight());return p.place(),this.encodeLowLevel(p,E,o,r)},t.prototype.encodeLowLevel=function(t,e,o,r){for(var n=e.getSymbolDataWidth(),i=e.getSymbolDataHeight(),a=new ByteMatrix(e.getSymbolWidth(),e.getSymbolHeight()),l=0,c=0;c<i;c++){var d=void 0;if(c%e.matrixHeight==0){d=0;for(var m=0;m<e.getSymbolWidth();m++)a.setBoolean(d,l,m%2==0),d++;l++}d=0;for(m=0;m<n;m++)m%e.matrixWidth==0&&(a.setBoolean(d,l,!0),d++),a.setBoolean(d,l,t.getBit(m,c)),d++,m%e.matrixWidth==e.matrixWidth-1&&(a.setBoolean(d,l,c%2==0),d++);if(l++,c%e.matrixHeight==e.matrixHeight-1){d=0;for(m=0;m<e.getSymbolWidth();m++)a.setBoolean(d,l,!0),d++;l++}}return this.convertByteMatrixToBitMatrix(a,o,r)},t.prototype.convertByteMatrixToBitMatrix=function(t,e,o){var r,n=t.getWidth(),i=t.getHeight(),a=Math.max(e,n),l=Math.max(o,i),c=Math.min(a/n,l/i),d=(a-n*c)/2,m=(l-i*c)/2;o<i||e<n?(d=0,m=0,r=new BitMatrix(n,i)):r=new BitMatrix(e,o),r.clear();for(var g=0,h=m;g<i;g++,h+=c)for(var y=0,T=d;y<n;y++,T+=c)1===t.get(y,g)&&r.setRegion(T,h,c,c);return r},t}();export default DataMatrixWriter;
//# sourceMappingURL=/sm/5103535cc6ca068482450c7aeba8914437713437cbcb84fb4b00e0f76cc092cd.map