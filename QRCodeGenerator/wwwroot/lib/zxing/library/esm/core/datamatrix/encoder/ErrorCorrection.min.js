/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/datamatrix/encoder/ErrorCorrection.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import StringBuilder from"../../util/StringBuilder";import{ALOG,FACTORS,FACTOR_SETS,LOG}from"./constants";var ErrorCorrection=function(){function r(){}return r.encodeECC200=function(r,e){if(r.length!==e.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var t=new StringBuilder;t.append(r);var o=e.getInterleavedBlockCount();if(1===o){var a=this.createECCBlock(r,e.getErrorCodewords());t.append(a)}else{for(var n=[],i=[],c=0;c<o;c++)n[c]=e.getDataLengthForInterleavedBlock(c+1),i[c]=e.getErrorLengthForInterleavedBlock(c+1);for(var f=0;f<o;f++){for(var l=new StringBuilder,C=f;C<e.getDataCapacity();C+=o)l.append(r.charAt(C));a=this.createECCBlock(l.toString(),i[f]);for(var d=0,g=f;g<i[f]*o;g+=o)t.setCharAt(e.getDataCapacity()+g,a.charAt(d++))}}return t.toString()},r.createECCBlock=function(r,e){for(var t=-1,o=0;o<FACTOR_SETS.length;o++)if(FACTOR_SETS[o]===e){t=o;break}if(t<0)throw new Error("Illegal number of error correction codewords specified: "+e);var a=FACTORS[t],n=[];for(o=0;o<e;o++)n[o]=0;for(o=0;o<r.length;o++){for(var i=n[e-1]^r.charAt(o).charCodeAt(0),c=e-1;c>0;c--)0!==i&&0!==a[c]?n[c]=n[c-1]^ALOG[(LOG[i]+LOG[a[c]])%255]:n[c]=n[c-1];0!==i&&0!==a[0]?n[0]=ALOG[(LOG[i]+LOG[a[0]])%255]:n[0]=0}var f=[];for(o=0;o<e;o++)f[o]=n[e-o-1];return f.map((function(r){return String.fromCharCode(r)})).join("")},r}();export default ErrorCorrection;
//# sourceMappingURL=/sm/6b8a980b6cccbb3fac93d224aea480f9688d89ad5a8c3d044e37b453772efc8e.map