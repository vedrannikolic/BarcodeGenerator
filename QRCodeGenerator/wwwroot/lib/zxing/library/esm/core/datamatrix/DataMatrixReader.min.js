/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/datamatrix/DataMatrixReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import BarcodeFormat from"../BarcodeFormat";import BitMatrix from"../common/BitMatrix";import DecodeHintType from"../DecodeHintType";import NotFoundException from"../NotFoundException";import Result from"../Result";import ResultMetadataType from"../ResultMetadataType";import System from"../util/System";import Decoder from"./decoder/Decoder";import Detector from"./detector/Detector";var DataMatrixReader=function(){function t(){this.decoder=new Decoder}return t.prototype.decode=function(e,o){var r,i;if(void 0===o&&(o=null),null!=o&&o.has(DecodeHintType.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=t.NO_POINTS}else{var n=new Detector(e.getBlackMatrix()).detect();r=this.decoder.decode(n.getBits()),i=n.getPoints()}var d=r.getRawBytes(),c=new Result(r.getText(),d,8*d.length,i,BarcodeFormat.DATA_MATRIX,System.currentTimeMillis()),u=r.getByteSegments();null!=u&&c.putMetadata(ResultMetadataType.BYTE_SEGMENTS,u);var m=r.getECLevel();return null!=m&&c.putMetadata(ResultMetadataType.ERROR_CORRECTION_LEVEL,m),c},t.prototype.reset=function(){},t.extractPureBits=function(t){var e=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(null==e||null==o)throw new NotFoundException;var r=this.moduleSize(e,t),i=e[1],a=o[1],n=e[0],d=(o[0]-n+1)/r,c=(a-i+1)/r;if(d<=0||c<=0)throw new NotFoundException;var u=r/2;i+=u,n+=u;for(var m=new BitMatrix(d,c),l=0;l<c;l++)for(var p=i+l*r,f=0;f<d;f++)t.get(n+f*r,p)&&m.set(f,l);return m},t.moduleSize=function(t,e){for(var o=e.getWidth(),r=t[0],i=t[1];r<o&&e.get(r,i);)r++;if(r===o)throw new NotFoundException;var a=r-t[0];if(0===a)throw new NotFoundException;return a},t.NO_POINTS=[],t}();export default DataMatrixReader;
//# sourceMappingURL=/sm/897c47647543f9ac4ba79b40fe306658139b8018e89ab62f2b6f59d1a6d76ac0.map