/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/datamatrix/decoder/DecodedBitStreamParser.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import DecoderResult from"../../common/DecoderResult";import BitSource from"../../common/BitSource";import StringBuilder from"../../util/StringBuilder";import StringEncoding from"../../util/StringEncoding";import StringUtils from"../../common/StringUtils";import FormatException from"../../FormatException";import IllegalStateException from"../../IllegalStateException";var Mode;!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(Mode||(Mode={}));var DecodedBitStreamParser=function(){function e(){}return e.decode=function(e){var r=new BitSource(e),a=new StringBuilder,t=new StringBuilder,o=new Array,n=Mode.ASCII_ENCODE;do{if(n===Mode.ASCII_ENCODE)n=this.decodeAsciiSegment(r,a,t);else{switch(n){case Mode.C40_ENCODE:this.decodeC40Segment(r,a);break;case Mode.TEXT_ENCODE:this.decodeTextSegment(r,a);break;case Mode.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,a);break;case Mode.EDIFACT_ENCODE:this.decodeEdifactSegment(r,a);break;case Mode.BASE256_ENCODE:this.decodeBase256Segment(r,a,o);break;default:throw new FormatException}n=Mode.ASCII_ENCODE}}while(n!==Mode.PAD_ENCODE&&r.available()>0);return t.length()>0&&a.append(t.toString()),new DecoderResult(e,a.toString(),0===o.length?null:o,null)},e.decodeAsciiSegment=function(e,r,a){var t=!1;do{var o=e.readBits(8);if(0===o)throw new FormatException;if(o<=128)return t&&(o+=128),r.append(String.fromCharCode(o-1)),Mode.ASCII_ENCODE;if(129===o)return Mode.PAD_ENCODE;if(o<=229){var n=o-130;n<10&&r.append("0"),r.append(""+n)}else switch(o){case 230:return Mode.C40_ENCODE;case 231:return Mode.BASE256_ENCODE;case 232:r.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:t=!0;break;case 236:r.append("[)>05"),a.insert(0,"");break;case 237:r.append("[)>06"),a.insert(0,"");break;case 238:return Mode.ANSIX12_ENCODE;case 239:return Mode.TEXT_ENCODE;case 240:return Mode.EDIFACT_ENCODE;default:if(254!==o||0!==e.available())throw new FormatException}}while(e.available()>0);return Mode.ASCII_ENCODE},e.decodeC40Segment=function(e,r){var a=!1,t=[],o=0;do{if(8===e.available())return;var n=e.readBits(8);if(254===n)return;this.parseTwoBytes(n,e.readBits(8),t);for(var i=0;i<3;i++){var d=t[i];switch(o){case 0:if(d<3)o=d+1;else{if(!(d<this.C40_BASIC_SET_CHARS.length))throw new FormatException;var E=this.C40_BASIC_SET_CHARS[d];a?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):r.append(E)}break;case 1:a?(r.append(String.fromCharCode(d+128)),a=!1):r.append(String.fromCharCode(d)),o=0;break;case 2:if(d<this.C40_SHIFT2_SET_CHARS.length){E=this.C40_SHIFT2_SET_CHARS[d];a?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):r.append(E)}else switch(d){case 27:r.append(String.fromCharCode(29));break;case 30:a=!0;break;default:throw new FormatException}o=0;break;case 3:a?(r.append(String.fromCharCode(d+224)),a=!1):r.append(String.fromCharCode(d+96)),o=0;break;default:throw new FormatException}}}while(e.available()>0)},e.decodeTextSegment=function(e,r){var a=!1,t=[],o=0;do{if(8===e.available())return;var n=e.readBits(8);if(254===n)return;this.parseTwoBytes(n,e.readBits(8),t);for(var i=0;i<3;i++){var d=t[i];switch(o){case 0:if(d<3)o=d+1;else{if(!(d<this.TEXT_BASIC_SET_CHARS.length))throw new FormatException;var E=this.TEXT_BASIC_SET_CHARS[d];a?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):r.append(E)}break;case 1:a?(r.append(String.fromCharCode(d+128)),a=!1):r.append(String.fromCharCode(d)),o=0;break;case 2:if(d<this.TEXT_SHIFT2_SET_CHARS.length){E=this.TEXT_SHIFT2_SET_CHARS[d];a?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):r.append(E)}else switch(d){case 27:r.append(String.fromCharCode(29));break;case 30:a=!0;break;default:throw new FormatException}o=0;break;case 3:if(!(d<this.TEXT_SHIFT3_SET_CHARS.length))throw new FormatException;E=this.TEXT_SHIFT3_SET_CHARS[d];a?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):r.append(E),o=0;break;default:throw new FormatException}}}while(e.available()>0)},e.decodeAnsiX12Segment=function(e,r){var a=[];do{if(8===e.available())return;var t=e.readBits(8);if(254===t)return;this.parseTwoBytes(t,e.readBits(8),a);for(var o=0;o<3;o++){var n=a[o];switch(n){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(n<14)r.append(String.fromCharCode(n+44));else{if(!(n<40))throw new FormatException;r.append(String.fromCharCode(n+51))}}}}while(e.available()>0)},e.parseTwoBytes=function(e,r,a){var t=(e<<8)+r-1,o=Math.floor(t/1600);a[0]=o,t-=1600*o,o=Math.floor(t/40),a[1]=o,a[2]=t-40*o},e.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var a=0;a<4;a++){var t=e.readBits(6);if(31===t){var o=8-e.getBitOffset();return void(8!==o&&e.readBits(o))}0==(32&t)&&(t|=64),r.append(String.fromCharCode(t))}}while(e.available()>0)},e.decodeBase256Segment=function(e,r,a){var t,o=1+e.getByteOffset(),n=this.unrandomize255State(e.readBits(8),o++);if((t=0===n?e.available()/8|0:n<250?n:250*(n-249)+this.unrandomize255State(e.readBits(8),o++))<0)throw new FormatException;for(var i=new Uint8Array(t),d=0;d<t;d++){if(e.available()<8)throw new FormatException;i[d]=this.unrandomize255State(e.readBits(8),o++)}a.push(i);try{r.append(StringEncoding.decode(i,StringUtils.ISO88591))}catch(e){throw new IllegalStateException("Platform does not support required encoding: "+e.message)}},e.unrandomize255State=function(e,r){var a=e-(149*r%255+1);return a>=0?a:a+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],e}();export default DecodedBitStreamParser;
//# sourceMappingURL=/sm/347a661230331ba6b2a6361dda85b36f0184c2d44afa2b4d38f5d9b5bd4bec70.map