/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/qrcode/decoder/Decoder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __values=this&&this.__values||function(r){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&r[e],t=0;if(o)return o.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};import ChecksumException from"../../ChecksumException";import BitMatrix from"../../common/BitMatrix";import GenericGF from"../../common/reedsolomon/GenericGF";import ReedSolomonDecoder from"../../common/reedsolomon/ReedSolomonDecoder";import BitMatrixParser from"./BitMatrixParser";import DataBlock from"./DataBlock";import DecodedBitStreamParser from"./DecodedBitStreamParser";import QRCodeDecoderMetaData from"./QRCodeDecoderMetaData";var Decoder=function(){function r(){this.rsDecoder=new ReedSolomonDecoder(GenericGF.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(r,e){return this.decodeBitMatrix(BitMatrix.parseFromBooleanArray(r),e)},r.prototype.decodeBitMatrix=function(r,e){var o=new BitMatrixParser(r),t=null;try{return this.decodeBitMatrixParser(o,e)}catch(r){t=r}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();var a=this.decodeBitMatrixParser(o,e);return a.setOther(new QRCodeDecoderMetaData(!0)),a}catch(r){if(null!==t)throw t;throw r}},r.prototype.decodeBitMatrixParser=function(r,e){var o,t,a,n,i=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),m=DataBlock.getDataBlocks(d,i,c),l=0;try{for(var s=__values(m),f=s.next();!f.done;f=s.next()){l+=(D=f.value).getNumDataCodewords()}}catch(r){o={error:r}}finally{try{f&&!f.done&&(t=s.return)&&t.call(s)}finally{if(o)throw o.error}}var u=new Uint8Array(l),h=0;try{for(var y=__values(m),p=y.next();!p.done;p=y.next()){var D,v=(D=p.value).getCodewords(),x=D.getNumDataCodewords();this.correctErrors(v,x);for(var B=0;B<x;B++)u[h++]=v[B]}}catch(r){a={error:r}}finally{try{p&&!p.done&&(n=y.return)&&n.call(y)}finally{if(a)throw a.error}}return DecodedBitStreamParser.decode(u,i,c,e)},r.prototype.correctErrors=function(r,e){var o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-e)}catch(r){throw new ChecksumException}for(var t=0;t<e;t++)r[t]=o[t]},r}();export default Decoder;
//# sourceMappingURL=/sm/268294015c449f07da4e6b14672f42d6b6e486cad3046200af5a20f62aae0b68.map