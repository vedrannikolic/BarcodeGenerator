/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/qrcode/QRCodeReader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import BarcodeFormat from"../BarcodeFormat";import BitMatrix from"../common/BitMatrix";import DecodeHintType from"../DecodeHintType";import NotFoundException from"../NotFoundException";import Result from"../Result";import ResultMetadataType from"../ResultMetadataType";import Decoder from"./decoder/Decoder";import QRCodeDecoderMetaData from"./decoder/QRCodeDecoderMetaData";import Detector from"./detector/Detector";var QRCodeReader=function(){function t(){this.decoder=new Decoder}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,o){var r,a;if(null!=o&&void 0!==o.get(DecodeHintType.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,o),a=t.NO_POINTS}else{var d=new Detector(e.getBlackMatrix()).detect(o);r=this.decoder.decodeBitMatrix(d.getBits(),o),a=d.getPoints()}r.getOther()instanceof QRCodeDecoderMetaData&&r.getOther().applyMirroredCorrection(a);var n=new Result(r.getText(),r.getRawBytes(),void 0,a,BarcodeFormat.QR_CODE,void 0),c=r.getByteSegments();null!==c&&n.putMetadata(ResultMetadataType.BYTE_SEGMENTS,c);var u=r.getECLevel();return null!==u&&n.putMetadata(ResultMetadataType.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(n.putMetadata(ResultMetadataType.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),n.putMetadata(ResultMetadataType.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),n},t.prototype.reset=function(){},t.extractPureBits=function(t){var e=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(null===e||null===o)throw new NotFoundException;var r=this.moduleSize(e,t),a=e[1],i=o[1],d=e[0],n=o[0];if(d>=n||a>=i)throw new NotFoundException;if(i-a!=n-d&&(n=d+(i-a))>=t.getWidth())throw new NotFoundException;var c=Math.round((n-d+1)/r),u=Math.round((i-a+1)/r);if(c<=0||u<=0)throw new NotFoundException;if(u!==c)throw new NotFoundException;var p=Math.floor(r/2);a+=p;var f=(d+=p)+Math.floor((c-1)*r)-n;if(f>0){if(f>p)throw new NotFoundException;d-=f}var l=a+Math.floor((u-1)*r)-i;if(l>0){if(l>p)throw new NotFoundException;a-=l}for(var R=new BitMatrix(c,u),M=0;M<u;M++)for(var m=a+Math.floor(M*r),E=0;E<c;E++)t.get(d+Math.floor(E*r),m)&&R.set(E,M);return R},t.moduleSize=function(t,e){for(var o=e.getHeight(),r=e.getWidth(),a=t[0],i=t[1],d=!0,n=0;a<r&&i<o;){if(d!==e.get(a,i)){if(5==++n)break;d=!d}a++,i++}if(a===r||i===o)throw new NotFoundException;return(a-t[0])/7},t.NO_POINTS=new Array,t}();export default QRCodeReader;
//# sourceMappingURL=/sm/a6bdeabcd97eb8d3288bda707e16e1be61fc483f84cde610ce57babfcf676237.map