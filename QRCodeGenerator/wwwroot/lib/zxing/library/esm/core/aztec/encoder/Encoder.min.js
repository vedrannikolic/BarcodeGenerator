/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/aztec/encoder/Encoder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};import BitArray from"../../common/BitArray";import IllegalArgumentException from"../../IllegalArgumentException";import StringUtils from"../../common/StringUtils";import BitMatrix from"../../common/BitMatrix";import AztecCode from"./AztecCode";import ReedSolomonEncoder from"../../common/reedsolomon/ReedSolomonEncoder";import GenericGF from"../../common/reedsolomon/GenericGF";import HighLevelEncoder from"./HighLevelEncoder";import Integer from"../../util/Integer";var Encoder=function(){function e(){}return e.encodeBytes=function(t){return e.encode(t,e.DEFAULT_EC_PERCENT,e.DEFAULT_AZTEC_LAYERS)},e.encode=function(t,r,n){var o,i,s,a,c,g=new HighLevelEncoder(t).encode(),l=Integer.truncDivision(g.getSize()*r,100)+11,u=g.getSize()+l;if(n!==e.DEFAULT_AZTEC_LAYERS){if(o=n<0,(i=Math.abs(n))>(o?e.MAX_NB_BITS_COMPACT:e.MAX_NB_BITS))throw new IllegalArgumentException(StringUtils.format("Illegal value %s for layers",n));var f=(s=e.totalBitsInLayer(i,o))-s%(a=e.WORD_SIZE[i]);if((c=e.stuffBits(g,a)).getSize()+l>f)throw new IllegalArgumentException("Data to large for user specified layer");if(o&&c.getSize()>64*a)throw new IllegalArgumentException("Data to large for user specified layer")}else{a=0,c=null;for(var d=0;;d++){if(d>e.MAX_NB_BITS)throw new IllegalArgumentException("Data too large for an Aztec code");if(i=(o=d<=3)?d+1:d,!(u>(s=e.totalBitsInLayer(i,o)))){null!=c&&a===e.WORD_SIZE[i]||(a=e.WORD_SIZE[i],c=e.stuffBits(g,a));f=s-s%a;if(!(o&&c.getSize()>64*a)&&c.getSize()+l<=f)break}}}var v,A=e.generateCheckWords(c,s,a),m=c.getSize()/a,E=e.generateModeMessage(o,i,m),p=(o?11:14)+4*i,I=new Int32Array(p);if(o){v=p;for(d=0;d<I.length;d++)I[d]=d}else{v=p+1+2*Integer.truncDivision(Integer.truncDivision(p,2)-1,15);var _=Integer.truncDivision(p,2),B=Integer.truncDivision(v,2);for(d=0;d<_;d++){var D=d+Integer.truncDivision(d,15);I[_-d-1]=B-D-1,I[_+d]=B+D+1}}for(var S=new BitMatrix(v),y=(d=0,0);d<i;d++){for(var w=4*(i-d)+(o?9:12),T=0;T<w;T++)for(var C=2*T,h=0;h<2;h++)A.get(y+C+h)&&S.set(I[2*d+h],I[2*d+T]),A.get(y+2*w+C+h)&&S.set(I[2*d+T],I[p-1-2*d-h]),A.get(y+4*w+C+h)&&S.set(I[p-1-2*d-h],I[p-1-2*d-T]),A.get(y+6*w+C+h)&&S.set(I[p-1-2*d-T],I[2*d+h]);y+=8*w}if(e.drawModeMessage(S,o,v,E),o)e.drawBullsEye(S,Integer.truncDivision(v,2),5);else{e.drawBullsEye(S,Integer.truncDivision(v,2),7);for(d=0,T=0;d<Integer.truncDivision(p,2)-1;d+=15,T+=16)for(h=1&Integer.truncDivision(v,2);h<v;h+=2)S.set(Integer.truncDivision(v,2)-T,h),S.set(Integer.truncDivision(v,2)+T,h),S.set(h,Integer.truncDivision(v,2)-T),S.set(h,Integer.truncDivision(v,2)+T)}var M=new AztecCode;return M.setCompact(o),M.setSize(v),M.setLayers(i),M.setCodeWords(m),M.setMatrix(S),M},e.drawBullsEye=function(e,t,r){for(var n=0;n<r;n+=2)for(var o=t-n;o<=t+n;o++)e.set(o,t-n),e.set(o,t+n),e.set(t-n,o),e.set(t+n,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},e.generateModeMessage=function(t,r,n){var o=new BitArray;return t?(o.appendBits(r-1,2),o.appendBits(n-1,6),o=e.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(n-1,11),o=e.generateCheckWords(o,40,4)),o},e.drawModeMessage=function(e,t,r,n){var o=Integer.truncDivision(r,2);if(t)for(var i=0;i<7;i++){var s=o-3+i;n.get(i)&&e.set(s,o-5),n.get(i+7)&&e.set(o+5,s),n.get(20-i)&&e.set(s,o+5),n.get(27-i)&&e.set(o-5,s)}else for(i=0;i<10;i++){s=o-5+i+Integer.truncDivision(i,5);n.get(i)&&e.set(s,o-7),n.get(i+10)&&e.set(o+7,s),n.get(29-i)&&e.set(s,o+7),n.get(39-i)&&e.set(o-7,s)}},e.generateCheckWords=function(t,r,n){var o,i,s=t.getSize()/n,a=new ReedSolomonEncoder(e.getGF(n)),c=Integer.truncDivision(r,n),g=e.bitsToWords(t,n,c);a.encode(g,c-s);var l=r%n,u=new BitArray;u.appendBits(0,l);try{for(var f=__values(Array.from(g)),d=f.next();!d.done;d=f.next()){var v=d.value;u.appendBits(v,n)}}catch(e){o={error:e}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}return u},e.bitsToWords=function(e,t,r){var n,o,i=new Int32Array(r);for(n=0,o=e.getSize()/t;n<o;n++){for(var s=0,a=0;a<t;a++)s|=e.get(n*t+a)?1<<t-a-1:0;i[n]=s}return i},e.getGF=function(e){switch(e){case 4:return GenericGF.AZTEC_PARAM;case 6:return GenericGF.AZTEC_DATA_6;case 8:return GenericGF.AZTEC_DATA_8;case 10:return GenericGF.AZTEC_DATA_10;case 12:return GenericGF.AZTEC_DATA_12;default:throw new IllegalArgumentException("Unsupported word size "+e)}},e.stuffBits=function(e,t){for(var r=new BitArray,n=e.getSize(),o=(1<<t)-2,i=0;i<n;i+=t){for(var s=0,a=0;a<t;a++)(i+a>=n||e.get(i+a))&&(s|=1<<t-1-a);(s&o)===o?(r.appendBits(s&o,t),i--):0==(s&o)?(r.appendBits(1|s,t),i--):r.appendBits(s,t)}return r},e.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.DEFAULT_EC_PERCENT=33,e.DEFAULT_AZTEC_LAYERS=0,e.MAX_NB_BITS=32,e.MAX_NB_BITS_COMPACT=4,e.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),e}();export default Encoder;
//# sourceMappingURL=/sm/7a7c3fb3a9c3b0f08c0b3e2dbcae889d842dd3cedf988c24f76c7dfc345c1efc.map