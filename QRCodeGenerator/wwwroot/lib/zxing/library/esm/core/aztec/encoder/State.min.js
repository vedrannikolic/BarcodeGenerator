/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/aztec/encoder/State.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __values=this&&this.__values||function(t){var n="function"==typeof Symbol&&Symbol.iterator,i=n&&t[n],e=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};import BitArray from"../../common/BitArray";import*as TokenHelpers from"./TokenHelpers";import*as C from"./EncoderConstants";import*as LatchTable from"./LatchTable";import*as ShiftTable from"./ShiftTable";import StringUtils from"../../common/StringUtils";var State=function(){function t(t,n,i,e){this.token=t,this.mode=n,this.binaryShiftByteCount=i,this.bitCount=e}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(n,i){var e=this.bitCount,r=this.token;if(n!==this.mode){var o=LatchTable.LATCH_TABLE[this.mode][n];r=TokenHelpers.add(r,65535&o,o>>16),e+=o>>16}var a=n===C.MODE_DIGIT?4:5;return new t(r=TokenHelpers.add(r,i,a),n,0,e+a)},t.prototype.shiftAndAppend=function(n,i){var e=this.token,r=this.mode===C.MODE_DIGIT?4:5;return e=TokenHelpers.add(e,ShiftTable.SHIFT_TABLE[this.mode][n],r),new t(e=TokenHelpers.add(e,i,5),this.mode,0,this.bitCount+r+5)},t.prototype.addBinaryShiftChar=function(n){var i=this.token,e=this.mode,r=this.bitCount;if(this.mode===C.MODE_PUNCT||this.mode===C.MODE_DIGIT){var o=LatchTable.LATCH_TABLE[e][C.MODE_UPPER];i=TokenHelpers.add(i,65535&o,o>>16),r+=o>>16,e=C.MODE_UPPER}var a=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,h=new t(i,e,this.binaryShiftByteCount+1,r+a);return 2078===h.binaryShiftByteCount&&(h=h.endBinaryShift(n+1)),h},t.prototype.endBinaryShift=function(n){if(0===this.binaryShiftByteCount)return this;var i=this.token;return new t(i=TokenHelpers.addBinaryShift(i,n-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(n){var i=this.bitCount+(LatchTable.LATCH_TABLE[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?i+=t.calculateBinaryShiftCost(n)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(i+=10),i<=n.bitCount},t.prototype.toBitArray=function(t){for(var n,i,e=[],r=this.endBinaryShift(t.length).token;null!==r;r=r.getPrevious())e.unshift(r);var o=new BitArray;try{for(var a=__values(e),h=a.next();!h.done;h=a.next()){h.value.appendTo(o,t)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o},t.prototype.toString=function(){return StringUtils.format("%s bits=%d bytes=%d",C.MODE_NAMES[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(C.EMPTY_TOKEN,C.MODE_UPPER,0,0),t}();export default State;
//# sourceMappingURL=/sm/cbadcfacb88fa990cf6a0233d2315b6cbbe966afe944a7e9e30fcd7c979d33ce.map