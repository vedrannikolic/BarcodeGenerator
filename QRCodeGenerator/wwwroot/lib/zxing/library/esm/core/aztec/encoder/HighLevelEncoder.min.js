/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/aztec/encoder/HighLevelEncoder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __values=this&&this.__values||function(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],a=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};import Collections from"../../util/Collections";import State from"./State";import*as C from"./EncoderConstants";import*as CharMap from"./CharMap";import*as ShiftTable from"./ShiftTable";import StringUtils from"../../common/StringUtils";var HighLevelEncoder=function(){function t(t){this.text=t}return t.prototype.encode=function(){for(var r=StringUtils.getCharCode(" "),e=StringUtils.getCharCode("\n"),a=Collections.singletonList(State.INITIAL_STATE),i=0;i<this.text.length;i++){var n=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case StringUtils.getCharCode("\r"):n=o===e?2:0;break;case StringUtils.getCharCode("."):n=o===r?3:0;break;case StringUtils.getCharCode(","):n=o===r?4:0;break;case StringUtils.getCharCode(":"):n=o===r?5:0;break;default:n=0}n>0?(a=t.updateStateListForPair(a,i,n),i++):a=this.updateStateListForChar(a,i)}return Collections.min(a,(function(t,r){return t.getBitCount()-r.getBitCount()})).toBitArray(this.text)},t.prototype.updateStateListForChar=function(r,e){var a,i,n=[];try{for(var o=__values(r),l=o.next();!l.done;l=o.next()){var h=l.value;this.updateStateForChar(h,e,n)}}catch(t){a={error:t}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}return t.simplifyStates(n)},t.prototype.updateStateForChar=function(t,r,e){for(var a=255&this.text[r],i=CharMap.CHAR_MAP[t.getMode()][a]>0,n=null,o=0;o<=C.MODE_PUNCT;o++){var l=CharMap.CHAR_MAP[o][a];if(l>0){if(null==n&&(n=t.endBinaryShift(r)),!i||o===t.getMode()||o===C.MODE_DIGIT){var h=n.latchAndAppend(o,l);e.push(h)}if(!i&&ShiftTable.SHIFT_TABLE[t.getMode()][o]>=0){var f=n.shiftAndAppend(o,l);e.push(f)}}}if(t.getBinaryShiftByteCount()>0||0===CharMap.CHAR_MAP[t.getMode()][a]){var u=t.addBinaryShiftChar(r);e.push(u)}},t.updateStateListForPair=function(t,r,e){var a,i,n=[];try{for(var o=__values(t),l=o.next();!l.done;l=o.next()){var h=l.value;this.updateStateForPair(h,r,e,n)}}catch(t){a={error:t}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}return this.simplifyStates(n)},t.updateStateForPair=function(t,r,e,a){var i=t.endBinaryShift(r);if(a.push(i.latchAndAppend(C.MODE_PUNCT,e)),t.getMode()!==C.MODE_PUNCT&&a.push(i.shiftAndAppend(C.MODE_PUNCT,e)),3===e||4===e){var n=i.latchAndAppend(C.MODE_DIGIT,16-e).latchAndAppend(C.MODE_DIGIT,1);a.push(n)}if(t.getBinaryShiftByteCount()>0){var o=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(o)}},t.simplifyStates=function(t){var r,e,a,i,n=[];try{for(var o=__values(t),l=o.next();!l.done;l=o.next()){var h=l.value,f=!0,u=function(t){if(t.isBetterThanOrEqualTo(h))return f=!1,"break";h.isBetterThanOrEqualTo(t)&&(n=n.filter((function(r){return r!==t})))};try{for(var s=(a=void 0,__values(n)),d=s.next();!d.done;d=s.next()){if("break"===u(d.value))break}}catch(t){a={error:t}}finally{try{d&&!d.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}f&&n.push(h)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return n},t}();export default HighLevelEncoder;
//# sourceMappingURL=/sm/f103073f5444fc27a0874fa752cd20ef70adb6d633aa057bfb899ca610c342a7.map