/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/pdf417/decoder/PDF417CodewordDecoder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import MathUtils from"../../common/detector/MathUtils";import PDF417Common from"../PDF417Common";import Float from"../../util/Float";var PDF417CodewordDecoder=function(){function o(){}return o.initialize=function(){for(var r=0;r<PDF417Common.SYMBOL_TABLE.length;r++)for(var e=PDF417Common.SYMBOL_TABLE[r],t=1&e,n=0;n<PDF417Common.BARS_IN_MODULE;n++){for(var a=0;(1&e)===t;)a+=1,e>>=1;t=1&e,o.RATIOS_TABLE[r]||(o.RATIOS_TABLE[r]=new Array(PDF417Common.BARS_IN_MODULE)),o.RATIOS_TABLE[r][PDF417Common.BARS_IN_MODULE-n-1]=Math.fround(a/PDF417Common.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},o.getDecodedValue=function(r){var e=o.getDecodedCodewordValue(o.sampleBitCounts(r));return-1!==e?e:o.getClosestDecodedValue(r)},o.sampleBitCounts=function(o){for(var r=MathUtils.sum(o),e=new Int32Array(PDF417Common.BARS_IN_MODULE),t=0,n=0,a=0;a<PDF417Common.MODULES_IN_CODEWORD;a++){var m=r/(2*PDF417Common.MODULES_IN_CODEWORD)+a*r/PDF417Common.MODULES_IN_CODEWORD;n+o[t]<=m&&(n+=o[t],t++),e[t]++}return e},o.getDecodedCodewordValue=function(r){var e=o.getBitValue(r);return-1===PDF417Common.getCodeword(e)?-1:e},o.getBitValue=function(o){for(var r=0,e=0;e<o.length;e++)for(var t=0;t<o[e];t++)r=r<<1|(e%2==0?1:0);return Math.trunc(r)},o.getClosestDecodedValue=function(r){var e=MathUtils.sum(r),t=new Array(PDF417Common.BARS_IN_MODULE);if(e>1)for(var n=0;n<t.length;n++)t[n]=Math.fround(r[n]/e);var a=Float.MAX_VALUE,m=-1;this.bSymbolTableReady||o.initialize();for(var D=0;D<o.RATIOS_TABLE.length;D++){for(var u=0,i=o.RATIOS_TABLE[D],l=0;l<PDF417Common.BARS_IN_MODULE;l++){var _=Math.fround(i[l]-t[l]);if((u+=Math.fround(_*_))>=a)break}u<a&&(a=u,m=PDF417Common.SYMBOL_TABLE[D])}return m},o.bSymbolTableReady=!1,o.RATIOS_TABLE=new Array(PDF417Common.SYMBOL_TABLE.length).map((function(o){return new Array(PDF417Common.BARS_IN_MODULE)})),o}();export default PDF417CodewordDecoder;
//# sourceMappingURL=/sm/f67e1655853c09f8fd29d7f3edbe70aea55a7fba0ee512b06d1ed526ab418649.map