/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@zxing/library@0.21.0/esm/core/common/BitMatrix.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import BitArray from"./BitArray";import System from"../util/System";import Arrays from"../util/Arrays";import StringBuilder from"../util/StringBuilder";import IllegalArgumentException from"../IllegalArgumentException";var BitMatrix=function(){function t(t,i,r,e){if(this.width=t,this.height=i,this.rowSize=r,this.bits=e,null==i&&(i=t),this.height=i,t<1||i<1)throw new IllegalArgumentException("Both dimensions must be greater than 0");null==r&&(r=Math.floor((t+31)/32)),this.rowSize=r,null==e&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(i){for(var r=i.length,e=i[0].length,o=new t(e,r),n=0;n<r;n++)for(var h=i[n],s=0;s<e;s++)h[s]&&o.set(s,n);return o},t.parseFromString=function(i,r,e){if(null===i)throw new IllegalArgumentException("stringRepresentation cannot be null");for(var o=new Array(i.length),n=0,h=0,s=-1,a=0,l=0;l<i.length;)if("\n"===i.charAt(l)||"\r"===i.charAt(l)){if(n>h){if(-1===s)s=n-h;else if(n-h!==s)throw new IllegalArgumentException("row lengths do not match");h=n,a++}l++}else if(i.substring(l,l+r.length)===r)l+=r.length,o[n]=!0,n++;else{if(i.substring(l,l+e.length)!==e)throw new IllegalArgumentException("illegal character encountered: "+i.substring(l));l+=e.length,o[n]=!1,n++}if(n>h){if(-1===s)s=n-h;else if(n-h!==s)throw new IllegalArgumentException("row lengths do not match");a++}for(var f=new t(s,a),g=0;g<n;g++)o[g]&&f.set(Math.floor(g%s),Math.floor(g/s));return f},t.prototype.get=function(t,i){var r=i*this.rowSize+Math.floor(t/32);return 0!=(this.bits[r]>>>(31&t)&1)},t.prototype.set=function(t,i){var r=i*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(31&t)&4294967295},t.prototype.unset=function(t,i){var r=i*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(31&t)&4294967295)},t.prototype.flip=function(t,i){var r=i*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(31&t)&4294967295},t.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new IllegalArgumentException("input matrix dimensions do not match");for(var i=new BitArray(Math.floor(this.width/32)+1),r=this.rowSize,e=this.bits,o=0,n=this.height;o<n;o++)for(var h=o*r,s=t.getRow(o,i).getBitArray(),a=0;a<r;a++)e[h+a]^=s[a]},t.prototype.clear=function(){for(var t=this.bits,i=t.length,r=0;r<i;r++)t[r]=0},t.prototype.setRegion=function(t,i,r,e){if(i<0||t<0)throw new IllegalArgumentException("Left and top must be nonnegative");if(e<1||r<1)throw new IllegalArgumentException("Height and width must be at least 1");var o=t+r,n=i+e;if(n>this.height||o>this.width)throw new IllegalArgumentException("The region must fit inside the matrix");for(var h=this.rowSize,s=this.bits,a=i;a<n;a++)for(var l=a*h,f=t;f<o;f++)s[l+Math.floor(f/32)]|=1<<(31&f)&4294967295},t.prototype.getRow=function(t,i){null==i||i.getSize()<this.width?i=new BitArray(this.width):i.clear();for(var r=this.rowSize,e=this.bits,o=t*r,n=0;n<r;n++)i.setBulk(32*n,e[o+n]);return i},t.prototype.setRow=function(t,i){System.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var t=this.getWidth(),i=this.getHeight(),r=new BitArray(t),e=new BitArray(t),o=0,n=Math.floor((i+1)/2);o<n;o++)r=this.getRow(o,r),e=this.getRow(i-1-o,e),r.reverse(),e.reverse(),this.setRow(o,e),this.setRow(i-1-o,r)},t.prototype.getEnclosingRectangle=function(){for(var t=this.width,i=this.height,r=this.rowSize,e=this.bits,o=t,n=i,h=-1,s=-1,a=0;a<i;a++)for(var l=0;l<r;l++){var f=e[a*r+l];if(0!==f){if(a<n&&(n=a),a>s&&(s=a),32*l<o){for(var g=0;0==(f<<31-g&4294967295);)g++;32*l+g<o&&(o=32*l+g)}if(32*l+31>h){for(g=31;f>>>g==0;)g--;32*l+g>h&&(h=32*l+g)}}}return h<o||s<n?null:Int32Array.from([o,n,h-o+1,s-n+1])},t.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,i=this.bits,r=0;r<i.length&&0===i[r];)r++;if(r===i.length)return null;for(var e=r/t,o=r%t*32,n=i[r],h=0;0==(n<<31-h&4294967295);)h++;return o+=h,Int32Array.from([o,e])},t.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,i=this.bits,r=i.length-1;r>=0&&0===i[r];)r--;if(r<0)return null;for(var e=Math.floor(r/t),o=32*Math.floor(r%t),n=i[r],h=31;n>>>h==0;)h--;return o+=h,Int32Array.from([o,e])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(i){if(!(i instanceof t))return!1;var r=i;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&Arrays.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var t=this.width;return t=31*(t=31*(t=31*(t=31*t+this.width)+this.height)+this.rowSize)+Arrays.hashCode(this.bits)},t.prototype.toString=function(t,i,r){return void 0===t&&(t="X "),void 0===i&&(i="  "),void 0===r&&(r="\n"),this.buildToString(t,i,r)},t.prototype.buildToString=function(t,i,r){for(var e=new StringBuilder,o=0,n=this.height;o<n;o++){for(var h=0,s=this.width;h<s;h++)e.append(this.get(h,o)?t:i);e.append(r)}return e.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}();export default BitMatrix;
//# sourceMappingURL=/sm/f74d2b1a8f83aac9a6b8daa77b28b62f705b1fe578cb809f4a7ed5511bf22efb.map